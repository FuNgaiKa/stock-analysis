# æŠ•ç ”å¤ç›˜åŠŸèƒ½è¡¥å……æ–¹æ¡ˆ

> **æ–‡æ¡£ç±»å‹**: åŠŸèƒ½è§„åˆ’ä¸å®æ–½æ–¹æ¡ˆ
> **é€‚ç”¨å¯¹è±¡**: russ_tradingæŠ•ç ”å¤ç›˜ç³»ç»Ÿ
> **æ›´æ–°æ—¶é—´**: 2025-11-14
> **æ•°æ®æº**: yfinance + akshare + tushare (å…è´¹)

---

## ğŸ“‹ èƒŒæ™¯

### å½“å‰çŠ¶æ€
- âœ… å·²æœ‰8+åˆ†æç»´åº¦,æœºæ„çº§æŒ‡æ ‡å®Œæ•´
- âœ… ä¸»è¦ç”¨äºæ¯æ—¥/æ¯å‘¨å¤ç›˜åˆ†æ
- âœ… æŠ•ç ”å¯¼å‘,ä¸åšå®æ—¶äº¤æ˜“

### å¯¹æ ‡å·®è·
ä¸å°å‹ç§å‹Ÿ(10+ç»´åº¦)å¯¹æ¯”,è¿˜ç¼ºå°‘:
1. æµåŠ¨æ€§é£é™©åˆ†æ
2. äº‹ä»¶é©±åŠ¨åˆ†æ
3. åŠ¨æ€æ­¢æŸå»ºè®®
4. é£é™©é¢„ç®—åˆ†é…
5. å®Œæ•´å†å²å›æµ‹
6. æ›´å¤šæç«¯åœºæ™¯

---

## ğŸ¯ åŠŸèƒ½è¡¥å……æ¸…å•

åŸºäº**å…è´¹æ•°æ®æº**(yfinance + akshare + tushare),è¯„ä¼°6ä¸ªè¡¥å……åŠŸèƒ½:

| åŠŸèƒ½ | å¯å®ç°æ€§ | å¼€å‘é‡ | å¤ç›˜ä»·å€¼ | ä¼˜å…ˆçº§ |
|------|---------|--------|---------|--------|
| **åŠ¨æ€æ­¢æŸå»ºè®®** | â­â­â­â­â­ | â­â­ å° | â­â­â­â­â­ | ğŸ¥‡ æœ€é«˜ |
| **æç«¯åœºæ™¯æ‰©å±•** | â­â­â­â­â­ | â­ æå° | â­â­â­â­â­ | ğŸ¥‡ æœ€é«˜ |
| **æµåŠ¨æ€§é£é™©åˆ†æ** | â­â­â­â­ | â­â­ å° | â­â­â­â­ | ğŸ¥ˆ é«˜ |
| **é£é™©é¢„ç®—åˆ†é…** | â­â­â­â­â­ | â­â­ å° | â­â­â­â­ | ğŸ¥ˆ é«˜ |
| **å†å²å›æµ‹æŠ¥å‘Š** | â­â­â­â­ | â­â­â­â­ å¤§ | â­â­â­â­ | ğŸ¥‰ ä¸­ |
| **äº‹ä»¶æ—¥å†åˆ†æ** | âš ï¸ åŠè‡ªåŠ¨ | â­â­â­ ä¸­ | â­â­â­ | ğŸ¥‰ ä¸­ |

---

## ğŸ“Š è¯¦ç»†åŠŸèƒ½è¯´æ˜

### 1. åŠ¨æ€æ­¢æŸå»ºè®® â­â­â­â­â­

#### è§£å†³é—®é¢˜
ä¸å†"ä¸€åˆ€åˆ‡-15%æ­¢æŸ",æ ¹æ®æ³¢åŠ¨ç‡ä¸ªæ€§åŒ–è°ƒæ•´æ­¢æŸçº¿ã€‚

#### æ•°æ®æºå¯ç”¨æ€§
| æŒ‡æ ‡ | æ•°æ®æº | å¸‚åœºè¦†ç›– |
|------|--------|---------|
| ATR(å¹³å‡çœŸå®æ³¢å¹…) | yfinance `high/low/close` | âœ… å…¨å¸‚åœº |
| å†å²æ³¢åŠ¨ç‡ | yfinance `returns` | âœ… å…¨å¸‚åœº |

**ç»“è®º**: âœ… **å®Œå…¨å¯å®ç°**,æ‰€æœ‰å¸‚åœºé€šç”¨

#### æ¯æ—¥å¤ç›˜ä»·å€¼
```markdown
### ğŸ›¡ï¸ åŠ¨æ€æ­¢æŸå»ºè®®

| æ ‡çš„ | å›ºå®šæ­¢æŸ | åŠ¨æ€æ­¢æŸ(ATR) | å½“å‰äºæŸ | çŠ¶æ€ |
|------|---------|--------------|---------|------|
| è¯åˆ¸ETF | -15% | -12%(æ”¶ç´§) | -8% | âœ… å®‰å…¨ |
| æ’ç”Ÿç§‘æŠ€ | -15% | -22%(æ”¾å®½) | -18% | âœ… ç»§ç»­æŒæœ‰ |
| ç…¤ç‚­ETF | -15% | -10%(æ”¶ç´§) | -11% | âš ï¸ è§¦å‘æ­¢æŸ |

**è¯´æ˜**:
- æ’ç”Ÿç§‘æŠ€æ³¢åŠ¨ç‡é«˜(ATR 3.2%),æ”¾å®½è‡³-22%é¿å…éœ‡è¡å‡ºå±€
- ç…¤ç‚­ETFæ³¢åŠ¨ç‡ä½(ATR 1.5%),æ”¶ç´§è‡³-10%æé«˜æ•ˆç‡
```

#### å®ç°ä½ç½®
- **æ–‡ä»¶**: `russ_trading/managers/risk_manager.py`
- **æ–¹æ³•**: æ–°å¢ `calculate_dynamic_stop_loss()`
- **å¼€å‘é‡**: â­â­ å° (1-2å¤©)

#### è®¡ç®—é€»è¾‘
```python
åŠ¨æ€æ­¢æŸ = ATR Ã— æ­¢æŸå€æ•°
- ä½æ³¢åŠ¨æ ‡çš„(ATR < 1.5%): å€æ•° = 6-8 (æ”¶ç´§æ­¢æŸ)
- ä¸­æ³¢åŠ¨æ ‡çš„(ATR 1.5-3%): å€æ•° = 8-12 (æ­£å¸¸)
- é«˜æ³¢åŠ¨æ ‡çš„(ATR > 3%): å€æ•° = 12-15 (æ”¾å®½æ­¢æŸ)
```

---

### 2. æç«¯åœºæ™¯æ‰©å±• â­â­â­â­â­

#### è§£å†³é—®é¢˜
æ›´å…¨é¢çš„å‹åŠ›æµ‹è¯•,è¡¥å……å†å²æç«¯åœºæ™¯ã€‚

#### æ•°æ®æºå¯ç”¨æ€§
| åœºæ™¯ | æ•°æ®æº | å¯ç”¨æ€§ |
|------|--------|--------|
| 2008é‡‘èå±æœº | yfinance | âœ… å·²æœ‰ |
| 2015Aè‚¡è‚¡ç¾ | yfinance/akshare | âœ… å¯è¡¥å…… |
| 2018ä¸­ç¾è´¸æ˜“æˆ˜ | yfinance | âœ… å¯è¡¥å…… |
| 2020æ–°å† ç–«æƒ… | yfinance | âœ… å·²æœ‰ |
| 2022ä¿„ä¹Œå†²çª | yfinance | âœ… å¯è¡¥å…… |

**ç»“è®º**: âœ… **å®Œå…¨å¯å®ç°**,åªéœ€æ‰©å±•åœºæ™¯åº“

#### æ¯å‘¨å¤ç›˜ä»·å€¼
```markdown
### ğŸš¨ æç«¯åœºæ™¯å‹åŠ›æµ‹è¯•

| å†å²åœºæ™¯ | å¸‚åœºè·Œå¹… | ç»„åˆé¢„ä¼°äºæŸ | è§¦å‘æ­¢æŸæ ‡çš„ |
|---------|---------|-------------|-------------|
| 2008é‡‘èå±æœº | -50% | -35.2% | å…¨éƒ¨ |
| 2015Aè‚¡è‚¡ç¾ | -40% | -32.8% | è¯åˆ¸ETFã€æ’ç”Ÿç§‘æŠ€ |
| 2018ä¸­ç¾è´¸æ˜“æˆ˜ | -25% | -18.5% | æ’ç”Ÿç§‘æŠ€ |
| 2020æ–°å† ç–«æƒ… | -30% | -22.1% | æ’ç”Ÿç§‘æŠ€ |
| 2022ä¿„ä¹Œå†²çª | -15% | -12.3% | æ—  |

**æŠ—é£é™©èƒ½åŠ›**: ğŸŸ¡ ä¸­ç­‰ (2015/2018åœºæ™¯äºæŸè¶…20%)
**å»ºè®®**: é™ä½é«˜Betaæ ‡çš„(æ’ç”Ÿç§‘æŠ€)è‡³25%ä»¥ä¸‹
```

#### å®ç°ä½ç½®
- **æ–‡ä»¶**: `russ_trading/core/stress_tester.py`
- **ä¿®æ”¹**: æ‰©å±• `HISTORICAL_CRISES` åœºæ™¯åº“
- **å¼€å‘é‡**: â­ æå° (1å¤©)

#### æ–°å¢åœºæ™¯å‚æ•°
```python
HISTORICAL_CRISES = {
    # å·²æœ‰
    '2008_financial_crisis': {...},
    '2020_covid_crash': {...},

    # æ–°å¢
    '2015_china_stock_crash': {
        'name': '2015å¹´Aè‚¡è‚¡ç¾',
        'period': '2015-06-12 to 2015-08-26',
        'index_drop': -0.40,  # æ²ªæ·±300è·Œ40%
        'duration_days': 75,
        'characteristics': 'æ æ†å»åŒ–ã€è¿ç»­ç†”æ–­'
    },
    '2018_trade_war': {
        'name': '2018å¹´ä¸­ç¾è´¸æ˜“æˆ˜',
        'period': '2018-01-26 to 2018-12-24',
        'index_drop': -0.25,
        'duration_days': 332,
        'characteristics': 'æŒç»­é˜´è·Œã€å¤–éƒ¨å†²å‡»'
    },
    '2022_russia_ukraine': {
        'name': '2022å¹´ä¿„ä¹Œå†²çª',
        'period': '2022-02-24 to 2022-03-15',
        'index_drop': -0.15,
        'duration_days': 20,
        'characteristics': 'åœ°ç¼˜æ”¿æ²»ã€èƒ½æºæš´æ¶¨'
    }
}
```

---

### 3. æµåŠ¨æ€§é£é™©åˆ†æ â­â­â­â­

#### è§£å†³é—®é¢˜
é¿å…ä¹°å…¥"æµåŠ¨æ€§é™·é˜±"(æƒ³å–å–ä¸æ‰çš„æ ‡çš„)ã€‚

#### æ•°æ®æºå¯ç”¨æ€§
| æŒ‡æ ‡ | æ•°æ®æº | å¸‚åœºè¦†ç›– |
|------|--------|---------|
| æ—¥å‡æˆäº¤é¢ | yfinance `volume Ã— close` | âœ… å…¨å¸‚åœº |
| æ¢æ‰‹ç‡ | akshare `stock_zh_a_spot_em()` | âœ… Aè‚¡ |
| ä¹°å–ä»·å·® | yfinance `bid/ask` | âš ï¸ ç¾è‚¡å¯ç”¨,Aè‚¡æ—  |

**ç»“è®º**:
- âœ… **Aè‚¡**: å®Œå…¨å®ç°(æˆäº¤é¢+æ¢æ‰‹ç‡)
- âš ï¸ **ç¾è‚¡/æ¸¯è‚¡**: éƒ¨åˆ†å®ç°(æˆäº¤é¢ä¸ºä¸»)

#### æ¯æ—¥å¤ç›˜ä»·å€¼
```markdown
### ğŸ“‰ æµåŠ¨æ€§é£é™©é¢„è­¦

| æ ‡çš„ | æ—¥å‡æˆäº¤é¢ | æ¢æ‰‹ç‡ | æµåŠ¨æ€§è¯„åˆ† | çŠ¶æ€ |
|------|-----------|--------|-----------|------|
| è¯åˆ¸ETF | 8.5äº¿ | 2.3% | 95åˆ† | âœ… å……è¶³ |
| ç…¤ç‚­ETF | 850ä¸‡ | 0.8% | 32åˆ† | âš ï¸ ä¸è¶³,å»ºè®®é€¢é«˜å‡ä»“ |
| æ’ç”Ÿç§‘æŠ€ | 45äº¿æ¸¯å¸ | 1.5% | 78åˆ† | âœ… è‰¯å¥½ |
| ç™½é…’ETF | 3200ä¸‡ | 1.2% | 58åˆ† | ğŸŸ¡ ä¸€èˆ¬ |

**é¢„è­¦è¯´æ˜**:
- âš ï¸ ç…¤ç‚­ETFæ—¥å‡æˆäº¤ä¸è¶³1000ä¸‡,æµåŠ¨æ€§é™·é˜±é£é™©é«˜
- å»ºè®®: åˆ†æ‰¹å‡ä»“,é¿å…é›†ä¸­å–å‡ºé€ æˆå†²å‡»æˆæœ¬
```

#### å®ç°ä½ç½®
- **æ–‡ä»¶**: `russ_trading/analyzers/liquidity_analyzer.py` (æ–°å»º)
- **å¼€å‘é‡**: â­â­ å° (2-3å¤©)

#### è¯„åˆ†æ¨¡å‹
```python
æµåŠ¨æ€§è¯„åˆ† = æˆäº¤é¢æƒé‡(60%) + æ¢æ‰‹ç‡æƒé‡(30%) + ä»·å·®æƒé‡(10%)

æˆäº¤é¢è¯„åˆ†:
- > 1äº¿: 100åˆ†
- 5000ä¸‡-1äº¿: 80åˆ†
- 1000ä¸‡-5000ä¸‡: 60åˆ†
- 500ä¸‡-1000ä¸‡: 40åˆ†
- < 500ä¸‡: 20åˆ†

æ¢æ‰‹ç‡è¯„åˆ†:
- > 3%: 100åˆ†
- 2-3%: 80åˆ†
- 1-2%: 60åˆ†
- 0.5-1%: 40åˆ†
- < 0.5%: 20åˆ†
```

---

### 4. é£é™©é¢„ç®—åˆ†é… â­â­â­â­â­

#### è§£å†³é—®é¢˜
ä¸æ˜¯"å¹³å‡åˆ†é…èµ„é‡‘",è€Œæ˜¯"æŒ‰é£é™©å¹³è¡¡"é…ç½®ä»“ä½ã€‚

#### æ•°æ®æºå¯ç”¨æ€§
| æŒ‡æ ‡ | æ•°æ®æº | å¸‚åœºè¦†ç›– |
|------|--------|---------|
| VaR(é£é™©ä»·å€¼) | yfinanceå†å²æ”¶ç›Šç‡ | âœ… å…¨å¸‚åœº |
| æ³¢åŠ¨ç‡ | yfinance | âœ… å…¨å¸‚åœº |
| ç›¸å…³æ€§ | yfinanceå¤šæ ‡çš„ | âœ… å…¨å¸‚åœº |

**ç»“è®º**: âœ… **å®Œå…¨å¯å®ç°**,åŸºäºå†å²æ”¶ç›Šç‡è®¡ç®—VaR

#### æ¯å‘¨å¤ç›˜ä»·å€¼
```markdown
### ğŸ’° é£é™©é¢„ç®—é…ç½®å»ºè®®

**æ€»é£é™©é¢„ç®—**: 10ä¸‡(æ€»èµ„é‡‘50ä¸‡çš„20%)
**å½“å‰é£é™©æš´éœ²**: 11.5ä¸‡ âš ï¸ è¶…é¢„ç®—15%

| æ ‡çš„ | VaR(95%) | é£é™©å æ¯” | å»ºè®®ä»“ä½ | å½“å‰ä»“ä½ | è°ƒæ•´ |
|------|---------|---------|---------|---------|------|
| è¯åˆ¸ETF | 3.5ä¸‡ | 35% | 35% | 40% | å‡5% â¬‡ï¸ |
| æ’ç”Ÿç§‘æŠ€ | 4.2ä¸‡ | 42% | 25% | 30% | å‡5% â¬‡ï¸ |
| ç…¤ç‚­ETF | 1.5ä¸‡ | 15% | 20% | 15% | åŠ 5% â¬†ï¸ |
| ç™½é…’ETF | 0.8ä¸‡ | 8% | 10% | 8% | åŠ 2% â¬†ï¸ |

**è°ƒæ•´é€»è¾‘**:
- æ’ç”Ÿç§‘æŠ€VaRæœ€é«˜(4.2ä¸‡),è¶…é¢„ç®—â†’å‡ä»“è‡³25%
- ç…¤ç‚­/ç™½é…’VaRä½,é£é™©åˆ©ç”¨ç‡ä¸è¶³â†’åŠ ä»“
- è°ƒæ•´åæ€»VaR: 10ä¸‡(ç¬¦åˆé¢„ç®—)
```

#### å®ç°ä½ç½®
- **æ–‡ä»¶**: `russ_trading/managers/dynamic_position_manager.py`
- **æ–¹æ³•**: æ–°å¢ `allocate_by_risk_budget()`
- **å¼€å‘é‡**: â­â­ å° (2-3å¤©)

#### è®¡ç®—é€»è¾‘
```python
# 1. è®¡ç®—æ¯ä¸ªæ ‡çš„çš„VaR(95%ç½®ä¿¡åº¦,1æ—¥)
VaR_i = å½“å‰å¸‚å€¼ Ã— 1.645 Ã— æ—¥æ³¢åŠ¨ç‡

# 2. è®¾å®šæ€»é£é™©é¢„ç®—
æ€»é£é™©é¢„ç®— = æ€»èµ„é‡‘ Ã— å¯æ‰¿å—äºæŸæ¯”ä¾‹(å¦‚20%)

# 3. æŒ‰é£é™©åˆ†é…ä»“ä½
å»ºè®®ä»“ä½_i = (é£é™©é¢„ç®—_i / VaR_i) Ã— å½“å‰ä»·æ ¼

# 4. å½’ä¸€åŒ–ç¡®ä¿æ€»ä»“ä½ä¸è¶…é™
æ€»ä»“ä½ â‰¤ 90%
```

---

### 5. å†å²å›æµ‹æŠ¥å‘Š â­â­â­â­

#### è§£å†³é—®é¢˜
"å¦‚æœæˆ‘ä¸Šå‘¨æŒ‰å»ºè®®è°ƒä»“,ç°åœ¨ä¼šæ€æ ·?"éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§ã€‚

#### æ•°æ®æºå¯ç”¨æ€§
| åŠŸèƒ½ | æ•°æ®æº | å¯ç”¨æ€§ |
|------|--------|--------|
| å†å²ä»·æ ¼ | yfinance | âœ… å…¨å¸‚åœº |
| é€æ—¥å›æ”¾ | yfinance | âœ… å¯å®ç° |
| äº¤æ˜“æˆæœ¬ | æ‰‹åŠ¨è®¾ç½® | âœ… å¯é…ç½® |

**ç»“è®º**: âœ… **å¯å®ç°**,å·²æœ‰æ¡†æ¶éœ€å®Œå–„

#### æ¯å‘¨å¤ç›˜ä»·å€¼
```markdown
### ğŸ“ˆ ä¸Šå‘¨è°ƒä»“å»ºè®®å›æµ‹ (11.07-11.13)

**ä¸Šå‘¨å»ºè®®**: è¯åˆ¸ETFå‡ä»“10%(40%â†’30%),åŠ ä»“ç…¤ç‚­ETF(15%â†’25%)

#### å›æµ‹ç»“æœå¯¹æ¯”

| åœºæ™¯ | æ”¶ç›Š | æœ€å¤§å›æ’¤ | å¤æ™®æ¯”ç‡ | èƒœç‡ |
|------|------|---------|---------|------|
| ğŸ“Š å®é™…æŒä»“(æœªè°ƒæ•´) | +3.2% | -2.1% | 1.8 | 60% |
| âœ… æŒ‰å»ºè®®è°ƒä»“ | +4.8% | -1.5% | 2.3 | 80% |
| ğŸ“ˆ å·®å¼‚ | **+1.6%** | **+0.6%** | **+0.5** | **+20%** |

#### åˆ†æ
- âœ… å»ºè®®æœ‰æ•ˆ: å¤šèµš1.6%,å°‘äº0.6%
- âœ… å¤æ™®æå‡: ä»1.8â†’2.3,é£é™©è°ƒæ•´åæ”¶ç›Šæ›´ä¼˜
- âœ… ç»§ç»­æ‰§è¡Œæœ¬å‘¨å»ºè®®
```

#### å®ç°ä½ç½®
- **æ–‡ä»¶**: `russ_trading/engines/backtest_engine_enhanced.py`
- **å®Œå–„**: é€æ—¥å›æ”¾åŠŸèƒ½ + æŠ¥å‘Šç”Ÿæˆ
- **å¼€å‘é‡**: â­â­â­â­ å¤§ (1-2å‘¨)

#### æ ¸å¿ƒåŠŸèƒ½
```python
class BacktestEngine:
    def backtest_position_adjustment(
        self,
        original_positions: Dict,  # åŸæŒä»“
        suggested_positions: Dict,  # å»ºè®®æŒä»“
        start_date: str,
        end_date: str
    ) -> Dict:
        """
        å›æµ‹æŒä»“è°ƒæ•´å»ºè®®

        Returns:
            {
                'original': {æ”¶ç›Šã€å›æ’¤ã€å¤æ™®},
                'suggested': {æ”¶ç›Šã€å›æ’¤ã€å¤æ™®},
                'difference': {æ”¶ç›Šå·®å¼‚ã€å›æ’¤å·®å¼‚}
            }
        """
        pass
```

---

### 6. äº‹ä»¶æ—¥å†åˆ†æ âš ï¸

#### è§£å†³é—®é¢˜
ä¸é”™è¿‡é‡è¦äº‹ä»¶çª—å£,æå‰å¸ƒå±€ã€‚

#### æ•°æ®æºå¯ç”¨æ€§
| äº‹ä»¶ç±»å‹ | æ•°æ®æº | å¯ç”¨æ€§ |
|---------|--------|--------|
| è´¢æŠ¥å­£ | æ‰‹åŠ¨ç»´æŠ¤ | âš ï¸ éœ€äººå·¥ |
| ç¾è”å‚¨è®®æ¯ | æ‰‹åŠ¨ç»´æŠ¤ | âš ï¸ éœ€äººå·¥ |
| GDP/CPIæ•°æ® | æ‰‹åŠ¨ç»´æŠ¤ | âš ï¸ éœ€äººå·¥ |
| å†å²å½±å“ | yfinance | âœ… å¯è®¡ç®— |

**ç»“è®º**:
- âŒ æ— å…è´¹APIæä¾›äº‹ä»¶æ—¥å†
- âœ… å¯æ‰‹åŠ¨ç»´æŠ¤YAMLäº‹ä»¶åº“
- âœ… å†å²å½±å“å¯é€šè¿‡yfinanceè®¡ç®—

#### æ¯å‘¨å¤ç›˜ä»·å€¼
```markdown
### ğŸ“… æœ¬å‘¨é‡è¦äº‹ä»¶

#### 1. 11æœˆ15æ—¥ ç¾è”å‚¨ä¸»å¸­é²å¨å°”è®²è¯
- **äº‹ä»¶ç±»å‹**: è´§å¸æ”¿ç­–
- **å½±å“å¸‚åœº**: ç¾è‚¡ã€æ¸¯è‚¡
- **å†å²å½±å“**: è®®æ¯å‘¨æœŸ,ç§‘æŠ€è‚¡å¹³å‡æ³¢åŠ¨Â±3.5% (åŸºäºè¿‡å»10æ¬¡æ•°æ®)
- **æŒä»“æš´éœ²**: ä½ æŒæœ‰æ’ç”Ÿç§‘æŠ€30%,é«˜åº¦ç›¸å…³
- **å»ºè®®**: é™ä½è‡³25%,é¢„ç•™5%ç°é‡‘åº”å¯¹æ³¢åŠ¨

#### 2. 11æœˆ18æ—¥ Aè‚¡åˆ¸å•†æ¿å—è´¢æŠ¥å­£
- **äº‹ä»¶ç±»å‹**: è´¢æŠ¥
- **å½±å“æ¿å—**: è¯åˆ¸
- **å†å²å½±å“**: è´¢æŠ¥å­£å‰3å¤©,è¯åˆ¸ETFå¹³å‡æ¶¨2.1%
- **æŒä»“å»ºè®®**: è¯åˆ¸ETF(å½“å‰40%)å¯é€‚å½“åŠ ä»“è‡³45%

#### 3. 11æœˆ20æ—¥ ä¸­å›½GDPæ•°æ®å…¬å¸ƒ
- **äº‹ä»¶ç±»å‹**: å®è§‚æ•°æ®
- **å½±å“å¸‚åœº**: Aè‚¡
- **é¢„æœŸ**: GDPå¢é€Ÿ5.0%,ç¬¦åˆé¢„æœŸåˆ™åˆ©å¥½
- **å»ºè®®**: è§‚æœ›,ä¸è°ƒæ•´ä»“ä½
```

#### å®ç°ä½ç½®
- **æ–‡ä»¶**: `russ_trading/analyzers/event_calendar_analyzer.py` (æ–°å»º)
- **æ•°æ®**: `russ_trading/data/event_calendar.yaml` (æ‰‹åŠ¨ç»´æŠ¤)
- **å¼€å‘é‡**: â­â­â­ ä¸­ (3-5å¤©)

#### äº‹ä»¶åº“ç¤ºä¾‹
```yaml
# event_calendar.yaml
events:
  - date: "2025-11-15"
    event: "ç¾è”å‚¨ä¸»å¸­é²å¨å°”è®²è¯"
    type: "è´§å¸æ”¿ç­–"
    markets: ["US", "HK"]
    impact_level: "é«˜"
    historical_volatility: 0.035  # 3.5%

  - date: "2025-11-18"
    event: "Aè‚¡åˆ¸å•†æ¿å—è´¢æŠ¥å­£"
    type: "è´¢æŠ¥"
    markets: ["CN"]
    sector: "è¯åˆ¸"
    historical_return: 0.021  # å‰3å¤©å¹³å‡æ¶¨2.1%

  - date: "2025-11-20"
    event: "ä¸­å›½GDPæ•°æ®"
    type: "å®è§‚æ•°æ®"
    markets: ["CN"]
    impact_level: "ä¸­"
```

#### å†å²å½±å“è®¡ç®—
```python
def calculate_historical_impact(event_type, lookback_years=3):
    """
    è®¡ç®—å†å²åŒç±»äº‹ä»¶çš„å½±å“

    Args:
        event_type: äº‹ä»¶ç±»å‹(å¦‚"ç¾è”å‚¨è®®æ¯")
        lookback_years: å›æº¯å¹´æ•°

    Returns:
        å¹³å‡æ¶¨è·Œå¹…ã€æ³¢åŠ¨ç‡
    """
    # ä½¿ç”¨yfinanceè·å–å†å²æ•°æ®
    # æ‰¾åˆ°è¿‡å»Nå¹´åŒç±»äº‹ä»¶æ—¥æœŸ
    # è®¡ç®—äº‹ä»¶å‰å3å¤©çš„å¹³å‡æ¶¨è·Œå¹…
    pass
```

---

## ğŸ“… å®æ–½è®¡åˆ’ (1ä¸ªæœˆ)

### **ç¬¬1å‘¨** (ç«‹å³è§æ•ˆ)

**ç›®æ ‡**: å¿«é€Ÿæå‡é£æ§èƒ½åŠ›

| ä»»åŠ¡ | è´Ÿè´£æ¨¡å— | é¢„è®¡å·¥æ—¶ |
|------|---------|---------|
| âœ… åŠ¨æ€æ­¢æŸå»ºè®® | `risk_manager.py` | 1-2å¤© |
| âœ… æç«¯åœºæ™¯æ‰©å±• | `stress_tester.py` | 1å¤© |

**äº¤ä»˜ç‰©**:
- æ¯æ—¥æŠ¥å‘Šæ–°å¢"åŠ¨æ€æ­¢æŸå»ºè®®"ç« èŠ‚
- æ¯å‘¨æŠ¥å‘Šæ–°å¢"2015/2018/2022åœºæ™¯"å‹åŠ›æµ‹è¯•

---

### **ç¬¬2-3å‘¨** (æ˜¾è‘—æå‡)

**ç›®æ ‡**: å®Œå–„é£é™©ç®¡ç†å’ŒæµåŠ¨æ€§åˆ†æ

| ä»»åŠ¡ | è´Ÿè´£æ¨¡å— | é¢„è®¡å·¥æ—¶ |
|------|---------|---------|
| âœ… æµåŠ¨æ€§é£é™©åˆ†æ | `liquidity_analyzer.py` (æ–°å»º) | 2-3å¤© |
| âœ… é£é™©é¢„ç®—åˆ†é… | `dynamic_position_manager.py` | 2-3å¤© |

**äº¤ä»˜ç‰©**:
- æ¯æ—¥æŠ¥å‘Šæ–°å¢"æµåŠ¨æ€§é£é™©é¢„è­¦"ç« èŠ‚
- æ¯å‘¨æŠ¥å‘Šæ–°å¢"é£é™©é¢„ç®—é…ç½®å»ºè®®"ç« èŠ‚

---

### **ç¬¬4å‘¨** (é•¿æœŸä¼˜åŒ–)

**ç›®æ ‡**: è¡¥å……äº‹ä»¶æ—¥å†å’Œå›æµ‹åŠŸèƒ½

| ä»»åŠ¡ | è´Ÿè´£æ¨¡å— | é¢„è®¡å·¥æ—¶ |
|------|---------|---------|
| âš ï¸ äº‹ä»¶æ—¥å†åˆ†æ | `event_calendar_analyzer.py` (æ–°å»º) | 3-5å¤© |
| âš ï¸ å†å²å›æµ‹å®Œå–„ | `backtest_engine_enhanced.py` | å¯åå»¶ |

**äº¤ä»˜ç‰©**:
- æ¯å‘¨æŠ¥å‘Šæ–°å¢"æœ¬å‘¨é‡è¦äº‹ä»¶"ç« èŠ‚
- æ¯å‘¨æŠ¥å‘Šæ–°å¢"ä¸Šå‘¨å»ºè®®å›æµ‹"ç« èŠ‚(å¯é€‰)

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ•°æ®æºé…ç½®

```python
# russ_trading/config/unified_config.py

DATA_SOURCES = {
    'yfinance': {
        'enabled': True,
        'markets': ['US', 'HK', 'CN'],
        'features': [
            'price',
            'volume',
            'atr',
            'historical_returns',
            'var_calculation'
        ]
    },
    'akshare': {
        'enabled': True,
        'markets': ['CN'],
        'features': [
            'fund_flow',
            'turnover_rate',
            'market_breadth',
            'north_bound_funds'
        ]
    },
    'tushare': {
        'enabled': True,
        'markets': ['CN'],
        'features': [
            'financial_data',
            'valuation_metrics'
        ]
    }
}
```

---

### æ¨¡å—ä¾èµ–å…³ç³»

```
russ_trading/
â”œâ”€â”€ analyzers/
â”‚   â”œâ”€â”€ liquidity_analyzer.py          # æ–°å¢
â”‚   â”œâ”€â”€ event_calendar_analyzer.py     # æ–°å¢
â”‚   â”œâ”€â”€ fund_flow_analyzer.py          # å·²æœ‰
â”‚   â””â”€â”€ market_depth_analyzer.py       # å·²æœ‰
â”‚
â”œâ”€â”€ managers/
â”‚   â”œâ”€â”€ risk_manager.py                # æ‰©å±•(åŠ¨æ€æ­¢æŸ)
â”‚   â””â”€â”€ dynamic_position_manager.py    # æ‰©å±•(é£é™©é¢„ç®—)
â”‚
â”œâ”€â”€ core/
â”‚   â””â”€â”€ stress_tester.py               # æ‰©å±•(æç«¯åœºæ™¯)
â”‚
â”œâ”€â”€ engines/
â”‚   â””â”€â”€ backtest_engine_enhanced.py    # å®Œå–„(é€æ—¥å›æ”¾)
â”‚
â””â”€â”€ data/
    â””â”€â”€ event_calendar.yaml            # æ–°å¢(æ‰‹åŠ¨ç»´æŠ¤)
```

---

### APIæ¥å£è®¾è®¡

#### 1. åŠ¨æ€æ­¢æŸ
```python
from russ_trading.managers.risk_manager import RiskManager

rm = RiskManager()

# è®¡ç®—åŠ¨æ€æ­¢æŸçº¿
result = rm.calculate_dynamic_stop_loss(
    symbol='510300.SS',      # è¯åˆ¸ETF
    current_price=1.20,
    entry_price=1.30,
    lookback_days=20
)

# è¿”å›
{
    'symbol': '510300.SS',
    'atr': 0.012,            # 1.2%
    'fixed_stop_loss': -0.15,  # -15%
    'dynamic_stop_loss': -0.12, # -12%(æ”¶ç´§)
    'recommendation': 'å»ºè®®æ­¢æŸä»·: 1.14å…ƒ',
    'reason': 'æ³¢åŠ¨ç‡è¾ƒä½(ATR 1.2%),æ”¶ç´§æ­¢æŸè‡³-12%'
}
```

#### 2. æµåŠ¨æ€§åˆ†æ
```python
from russ_trading.analyzers.liquidity_analyzer import LiquidityAnalyzer

la = LiquidityAnalyzer()

# åˆ†ææµåŠ¨æ€§
result = la.analyze_liquidity(
    symbol='510300.SS',
    days=20
)

# è¿”å›
{
    'symbol': '510300.SS',
    'avg_volume': 8500000000,  # 85äº¿
    'avg_turnover': 0.023,     # 2.3%
    'liquidity_score': 95,
    'level': 'excellent',
    'warning': None
}
```

#### 3. é£é™©é¢„ç®—
```python
from russ_trading.managers.dynamic_position_manager import DynamicPositionManager

dpm = DynamicPositionManager()

# è®¡ç®—é£é™©é¢„ç®—é…ç½®
result = dpm.allocate_by_risk_budget(
    positions=[
        {'symbol': '510300.SS', 'ratio': 0.40},
        {'symbol': '3033.HK', 'ratio': 0.30},
    ],
    total_capital=500000,
    risk_budget=100000
)

# è¿”å›
{
    'total_var': 115000,        # å½“å‰æ€»VaR(è¶…é¢„ç®—)
    'risk_budget': 100000,
    'suggestions': [
        {
            'symbol': '510300.SS',
            'current_ratio': 0.40,
            'var': 35000,
            'suggested_ratio': 0.35,
            'adjustment': -0.05
        },
        ...
    ]
}
```

---

## ğŸ“Š æŠ¥å‘Šé›†æˆç¤ºä¾‹

### æ¯æ—¥æŠ¥å‘Šæ–°å¢ç« èŠ‚

```markdown
# å¸‚åœºæ´å¯ŸæŠ¥å‘Š - 2025å¹´11æœˆ14æ—¥

## ä¸€ã€æŒä»“åˆ†æ
...

## äºŒã€é£æ§åˆ†æ (æ–°å¢)

### ğŸ›¡ï¸ åŠ¨æ€æ­¢æŸå»ºè®®
...

### ğŸ“‰ æµåŠ¨æ€§é£é™©é¢„è­¦
...

## ä¸‰ã€å¸‚åœºåˆ†æ
...
```

---

### æ¯å‘¨æŠ¥å‘Šæ–°å¢ç« èŠ‚

```markdown
# æ¯å‘¨ç­–ç•¥æŠ¥å‘Š - 2025å¹´ç¬¬46å‘¨

## ä¸€ã€ä¸Šå‘¨å¤ç›˜ (æ–°å¢)

### ğŸ“ˆ è°ƒä»“å»ºè®®å›æµ‹
...

## äºŒã€æœ¬å‘¨å±•æœ› (æ–°å¢)

### ğŸ“… é‡è¦äº‹ä»¶æ—¥å†
...

### ğŸ’° é£é™©é¢„ç®—é…ç½®
...

### ğŸš¨ æç«¯åœºæ™¯å‹åŠ›æµ‹è¯•
...

## ä¸‰ã€æ“ä½œå»ºè®®
...
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæˆåº¦

| åŠŸèƒ½ | éªŒæ”¶æ ‡å‡† | è´Ÿè´£æ¨¡å— |
|------|---------|---------|
| **åŠ¨æ€æ­¢æŸ** | æ¯æ—¥æŠ¥å‘Šæ˜¾ç¤ºå„æ ‡çš„åŠ¨æ€æ­¢æŸçº¿ | `risk_manager.py` |
| **æç«¯åœºæ™¯** | æ¯å‘¨æŠ¥å‘ŠåŒ…å«5ä¸ªå†å²åœºæ™¯æµ‹è¯• | `stress_tester.py` |
| **æµåŠ¨æ€§åˆ†æ** | æ¯æ—¥æŠ¥å‘Šæ˜¾ç¤ºæµåŠ¨æ€§è¯„åˆ†+é¢„è­¦ | `liquidity_analyzer.py` |
| **é£é™©é¢„ç®—** | æ¯å‘¨æŠ¥å‘Šæ˜¾ç¤ºé£é™©é¢„ç®—é…ç½®å»ºè®® | `dynamic_position_manager.py` |
| **äº‹ä»¶æ—¥å†** | æ¯å‘¨æŠ¥å‘Šæ˜¾ç¤ºæœªæ¥7å¤©é‡è¦äº‹ä»¶ | `event_calendar_analyzer.py` |
| **å†å²å›æµ‹** | æ¯å‘¨æŠ¥å‘Šæ˜¾ç¤ºä¸Šå‘¨å»ºè®®å›æµ‹ç»“æœ | `backtest_engine_enhanced.py` |

---

### è´¨é‡è¦æ±‚

1. **å‡†ç¡®æ€§**: è®¡ç®—ç»“æœä¸æ‰‹å·¥éªŒè¯è¯¯å·®<1%
2. **æ€§èƒ½**: å•ä¸ªåŠŸèƒ½è®¡ç®—æ—¶é—´<5ç§’
3. **å¯è¯»æ€§**: æŠ¥å‘Šè¾“å‡ºæ¸…æ™°,å»ºè®®æ˜ç¡®
4. **é²æ£’æ€§**: æ•°æ®ç¼ºå¤±æ—¶é™çº§å¤„ç†,ä¸æŠ¥é”™

---

## ğŸ“š å‚è€ƒèµ„æ–™

### æ•°æ®æºæ–‡æ¡£
- yfinance: https://github.com/ranaroussi/yfinance
- akshare: https://akshare.akfamily.xyz/
- tushare: https://tushare.pro/document/2

### é£é™©ç®¡ç†ç†è®º
- ã€Šé£é™©ç®¡ç†ä¸é‡‘èæœºæ„ã€‹ - John C. Hull
- ã€Šä¸»åŠ¨æŠ•èµ„ç»„åˆç®¡ç†ã€‹ - Grinold & Kahn
- ATRæ­¢æŸ: Wilder's Average True Range

### å›æµ‹æ–¹æ³•
- ã€Šé‡åŒ–æŠ•èµ„:ç­–ç•¥ä¸æŠ€æœ¯ã€‹ - ä¸é¹
- Backtraderæ¡†æ¶: https://www.backtrader.com/

---

## ğŸš€ åç»­æ‰©å±•

### Phase 2 (2-3ä¸ªæœˆå)

å¦‚æœéœ€è¦è¿›ä¸€æ­¥æå‡,å¯è€ƒè™‘:

1. **å¤šç­–ç•¥å›æµ‹**: åŒæ—¶å›æµ‹å¤šä¸ªè°ƒä»“ç­–ç•¥
2. **å‚æ•°ä¼˜åŒ–**: è‡ªåŠ¨å¯»æ‰¾æœ€ä¼˜æ­¢æŸå€æ•°ã€é£é™©é¢„ç®—æ¯”ä¾‹
3. **æœºå™¨å­¦ä¹ é¢„æµ‹**: åŸºäºå†å²äº‹ä»¶,é¢„æµ‹æœªæ¥å½±å“
4. **å®æ—¶é¢„è­¦**: ç›˜ä¸­ç›‘æ§è§¦å‘è‡ªåŠ¨é‚®ä»¶/çŸ­ä¿¡

**æ•°æ®æºéœ€æ±‚**: ä»å¯ç”¨å…è´¹æ•°æ®,ä¸éœ€ä»˜è´¹API

---

## â“ FAQ

**Q: è¿™6ä¸ªåŠŸèƒ½éƒ½è¦å®ç°å—?**

A: ä¸å¿…å…¨éƒ¨å®ç°ã€‚å»ºè®®ä¼˜å…ˆåš"åŠ¨æ€æ­¢æŸ"å’Œ"æç«¯åœºæ™¯"(1å‘¨å®Œæˆ,ç«‹å³è§æ•ˆ),å…¶ä½™æ ¹æ®å®é™…éœ€æ±‚å†³å®šã€‚

**Q: éœ€è¦ä»˜è´¹æ•°æ®æºå—?**

A: ä¸éœ€è¦ã€‚åŸºäºyfinance+akshare+tushare(å…è´¹)å°±èƒ½å®ç°5ä¸ªåŠŸèƒ½,"äº‹ä»¶æ—¥å†"éœ€æ‰‹åŠ¨ç»´æŠ¤YAMLæ–‡ä»¶ã€‚

**Q: å¼€å‘é‡å¤§å—?**

A: ç¬¬1å‘¨çš„2ä¸ªåŠŸèƒ½å¾ˆå°(2-3å¤©),ç¬¬2-3å‘¨çš„2ä¸ªåŠŸèƒ½ä¸­ç­‰(4-6å¤©),ç¬¬4å‘¨çš„2ä¸ªåŠŸèƒ½å¯åå»¶ã€‚

**Q: ä¼šå½±å“ç°æœ‰åŠŸèƒ½å—?**

A: ä¸ä¼šã€‚æ–°åŠŸèƒ½éƒ½æ˜¯ç‹¬ç«‹æ¨¡å—,åªåœ¨æŠ¥å‘Šç”Ÿæˆæ—¶é›†æˆ,ä¸å½±å“ç°æœ‰ä»£ç ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-14
**ç»´æŠ¤è€…**: russ_tradingå›¢é˜Ÿ
