# ç¾è‚¡ç‚¹ä½åˆ†æç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **åˆ›å»ºæ—¥æœŸ**: 2025-10-12
- **ç‰ˆæœ¬**: v1.0
- **çŠ¶æ€**: è®¾è®¡é˜¶æ®µ
- **è´Ÿè´£äºº**: Claude Code & Russ

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

åœ¨ç°æœ‰çš„Aè‚¡/æ¸¯è‚¡åˆ†æç³»ç»ŸåŸºç¡€ä¸Šï¼Œæ‰©å±•ç¾è‚¡å¸‚åœºç‚¹ä½åˆ†æåŠŸèƒ½ï¼Œæ”¯æŒæ ‡æ™®500ã€çº³æ–¯è¾¾å…‹ã€é“ç¼æ–¯ç­‰ä¸»è¦ç¾è‚¡æŒ‡æ•°çš„å†å²ç‚¹ä½å¯¹æ¯”ã€å¸‚åœºçŠ¶æ€è¯Šæ–­å’Œä»“ä½ç®¡ç†å»ºè®®ã€‚

---

## ğŸ” æ•°æ®æºè°ƒç ”ç»“æœ

### æ¨èæ•°æ®æºå¯¹æ¯”

| æ•°æ®æº | ä¼˜å…ˆçº§ | è´¹ç”¨ | æ•°æ®è´¨é‡ | é€Ÿåº¦ | APIé™åˆ¶ | æ¨èåœºæ™¯ |
|--------|--------|------|----------|------|---------|----------|
| **yfinance** | â­â­â­â­â­ | å…è´¹ | â­â­â­â­ | ~2-5s | æ— é™åˆ¶ | å†å²æ•°æ®ã€æ—¥å¸¸åˆ†æ |
| **Alpha Vantage** | â­â­â­â­ | å…è´¹ | â­â­â­â­â­ | ~1-2s | 500æ¬¡/å¤© | æŠ€æœ¯æŒ‡æ ‡ã€å®æ—¶æ•°æ® |
| **Polygon.io** | â­â­â­ | å…è´¹ | â­â­â­â­â­ | <1s | 5æ¬¡/åˆ†é’Ÿ | é«˜é¢‘äº¤æ˜“ã€å®æ—¶ç›‘æ§ |
| **tushare** | â­â­ | ç§¯åˆ†åˆ¶ | â­â­â­ | ä¸­ç­‰ | éœ€ç§¯åˆ† | ä¸“ä¸šé‡åŒ–(ä¸»è¦Aè‚¡) |

### ğŸ† æœ€ç»ˆé€‰æ‹©: yfinance

**ç†ç”±**:
1. âœ… **å®Œå…¨å…è´¹** - æ— éœ€APIå¯†é’¥ï¼Œæ— è¯·æ±‚æ¬¡æ•°é™åˆ¶
2. âœ… **æ•°æ®å®Œæ•´** - å†å²æ•°æ®è¦†ç›–èŒƒå›´å¹¿ï¼Œæ”¯æŒæ‰€æœ‰ç¾è‚¡æŒ‡æ•°
3. âœ… **ç¤¾åŒºæˆç†Ÿ** - Pythonç¤¾åŒºå¹¿æ³›ä½¿ç”¨ï¼Œæ–‡æ¡£é½å…¨ï¼Œé—®é¢˜å°‘
4. âœ… **æ˜“äºé›†æˆ** - APIç®€å•ï¼Œä¸ç°æœ‰pandasæ•°æ®ç»“æ„å…¼å®¹
5. âœ… **ç¨³å®šæ€§é«˜** - åŸºäºYahoo Financeå…¬å¼€APIï¼Œé•¿æœŸç¨³å®š

**å¤‡ç”¨æ–¹æ¡ˆ**: Alpha Vantage (éœ€è¦å®æ—¶æ•°æ®æˆ–æŠ€æœ¯æŒ‡æ ‡æ—¶å¯ç”¨)

---

## ğŸ“Š ç¾è‚¡ä¸»è¦æŒ‡æ•°ä»£ç 

### æ ¸å¿ƒæŒ‡æ•°

| æŒ‡æ•°åç§° | yfinanceä»£ç  | è¯´æ˜ | æˆåˆ†è‚¡æ•°é‡ |
|---------|-------------|------|-----------|
| æ ‡æ™®500 | `^GSPC` | S&P 500 Index | 500 |
| çº³æ–¯è¾¾å…‹ç»¼åˆ | `^IXIC` | NASDAQ Composite | 3000+ |
| é“ç¼æ–¯å·¥ä¸š | `^DJI` | Dow Jones Industrial Average | 30 |
| çº³æ–¯è¾¾å…‹100 | `^NDX` | NASDAQ-100 | 100 |
| ç½—ç´ 2000 | `^RUT` | Russell 2000 (å°ç›˜è‚¡) | 2000 |

### è¡ç”ŸæŒ‡æ•°

| æŒ‡æ•°åç§° | yfinanceä»£ç  | è¯´æ˜ |
|---------|-------------|------|
| VIXææ…ŒæŒ‡æ•° | `^VIX` | CBOE Volatility Index |
| è´¹åŸåŠå¯¼ä½“ | `^SOX` | PHLX Semiconductor Sector |
| æ ‡æ™®ç§‘æŠ€ | `^SP500-45` | S&P 500 Information Technology |

### ä¸»è¦ETF

| ETFåç§° | yfinanceä»£ç  | è¯´æ˜ |
|---------|-------------|------|
| SPY | `SPY` | SPDR S&P 500 ETF |
| QQQ | `QQQ` | Invesco QQQ Trust (NASDAQ-100) |
| DIA | `DIA` | SPDR Dow Jones Industrial Average ETF |
| IWM | `IWM` | iShares Russell 2000 ETF |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ¨¡å—ç»“æ„

```
stock-analysis/
â”œâ”€â”€ data_sources/
â”‚   â”œâ”€â”€ hkstock_source.py           # æ¸¯è‚¡æ•°æ®æº (å·²æœ‰)
â”‚   â””â”€â”€ us_stock_source.py          # ğŸ†• ç¾è‚¡æ•°æ®æº (æ–°å¢)
â”‚
â”œâ”€â”€ position_analysis/
â”‚   â”œâ”€â”€ historical_position_analyzer.py  # æ ¸å¿ƒåˆ†æå™¨ (å¤ç”¨)
â”‚   â”œâ”€â”€ market_state_detector.py         # å¸‚åœºçŠ¶æ€æ£€æµ‹ (å¤ç”¨)
â”‚   â”œâ”€â”€ enhanced_data_provider.py        # æ•°æ®æä¾›å™¨ (éœ€æ‰©å±•)
â”‚   â”œâ”€â”€ hk_market_analyzer.py            # æ¸¯è‚¡åˆ†æå™¨ (å·²æœ‰)
â”‚   â””â”€â”€ us_market_analyzer.py            # ğŸ†• ç¾è‚¡åˆ†æå™¨ (æ–°å¢)
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ hk_stock_analysis/
â”‚   â”‚   â””â”€â”€ run_hk_analysis.py           # æ¸¯è‚¡åˆ†æè„šæœ¬ (å·²æœ‰)
â”‚   â””â”€â”€ us_stock_analysis/               # ğŸ†• ç¾è‚¡åˆ†æç›®å½• (æ–°å¢)
â”‚       â””â”€â”€ run_us_analysis.py           # ğŸ†• ç¾è‚¡åˆ†æè„šæœ¬ (æ–°å¢)
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ HK_STOCK_README.md               # æ¸¯è‚¡æ–‡æ¡£ (å·²æœ‰)
    â””â”€â”€ US_STOCK_README.md               # ğŸ†• ç¾è‚¡æ–‡æ¡£ (æ–°å¢)
```

---

## ğŸ’» æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. ç¾è‚¡æ•°æ®æº (`us_stock_source.py`)

**åŠŸèƒ½æ¸…å•**:
- âœ… è·å–ç¾è‚¡æŒ‡æ•°å†å²Kçº¿æ•°æ®
- âœ… è·å–å®æ—¶è¡Œæƒ…æ•°æ®
- âœ… è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ (MA/MACD/RSI/ATRç­‰)
- âœ… å¸‚åœºå¹¿åº¦ç»Ÿè®¡ (æ¶¨è·Œå®¶æ•°)
- âœ… èµ„é‡‘æµå‘ç›‘æ§
- âœ… ç¼“å­˜æœºåˆ¶ (5åˆ†é’Ÿç¼“å­˜)
- âœ… è‡ªåŠ¨é‡è¯•æœºåˆ¶ (ç½‘ç»œå®¹é”™)

**ä¸»è¦æ¥å£**:
```python
class USStockDataSource:
    def get_us_index_daily(symbol: str) -> pd.DataFrame
    def get_us_stock_hist(symbol: str, start: str, end: str) -> pd.DataFrame
    def get_market_summary() -> Dict
    def calculate_technical_indicators(df: pd.DataFrame) -> Dict
```

**å‚è€ƒå®ç°**: åŸºäº `hkstock_source.py` æ¶æ„

---

### 2. ç¾è‚¡å¸‚åœºåˆ†æå™¨ (`us_market_analyzer.py`)

**åŠŸèƒ½æ¸…å•**:
- âœ… å¤šæŒ‡æ•°è”åˆåˆ†æ (æ ‡æ™®500 + çº³æ–¯è¾¾å…‹ + é“ç¼æ–¯)
- âœ… å†å²ç‚¹ä½å¯¹æ¯” (Phase 1)
- âœ… ä¹ç»´åº¦å¸‚åœºåˆ†æ (Phase 2)
- âœ… å¸‚åœºçŠ¶æ€æ™ºèƒ½è¯Šæ–­ (Phase 3)
- âœ… VIXææ…ŒæŒ‡æ•°é›†æˆ
- âœ… ä»“ä½ç®¡ç†å»ºè®® (Kellyå…¬å¼)
- âœ… HTMLæŠ¥å‘Šç”Ÿæˆ

**ä¸»è¦æ¥å£**:
```python
class USMarketAnalyzer:
    def analyze_current_position(indices: List[str]) -> Dict
    def detect_market_state(index: str) -> Dict
    def generate_trading_signals() -> Dict
    def calculate_position_suggestion() -> float
    def generate_html_report(output_dir: str) -> str
```

**æ ¸å¿ƒé€»è¾‘**: å¤ç”¨ `historical_position_analyzer.py` + `market_state_detector.py`

---

### 3. å¢å¼ºæ•°æ®æä¾›å™¨æ‰©å±• (`enhanced_data_provider.py`)

**æ–°å¢æ–¹æ³•**:
```python
class EnhancedDataProvider:
    # ğŸ†• ç¾è‚¡ä¸“å±æŒ‡æ ‡
    def get_us_market_sentiment() -> Dict          # ææ…ŒæŒ‡æ•°ã€å¸‚åœºæƒ…ç»ª
    def get_us_capital_flow() -> Dict               # èµ„é‡‘æµå‘
    def get_us_market_breadth() -> Dict             # å¸‚åœºå®½åº¦
    def get_us_sector_rotation() -> Dict            # è¡Œä¸šè½®åŠ¨
```

---

## ğŸ”§ å®ç°ç»†èŠ‚

### æ—¶åŒºå¤„ç†

**é—®é¢˜**: ç¾è‚¡äº¤æ˜“æ—¶é—´ (ET) ä¸ä¸­å›½æ—¶åŒº (UTC+8) ç›¸å·®12-13å°æ—¶

**è§£å†³æ–¹æ¡ˆ**:
```python
import pytz

# ç¾ä¸œæ—¶é—´è½¬åŒ—äº¬æ—¶é—´
et_tz = pytz.timezone('America/New_York')
beijing_tz = pytz.timezone('Asia/Shanghai')

def convert_us_time_to_beijing(us_time: datetime) -> datetime:
    """ç¾ä¸œæ—¶é—´è½¬åŒ—äº¬æ—¶é—´"""
    return us_time.astimezone(beijing_tz)
```

---

### äº¤æ˜“æ—¥å†

**é—®é¢˜**: ç¾è‚¡äº¤æ˜“æ—¥ä¸ä¸­å›½ä¸åŒ (èŠ‚å‡æ—¥ã€ä¼‘å¸‚æ—¶é—´)

**è§£å†³æ–¹æ¡ˆ**:
```python
import pandas_market_calendars as mcal

# è·å–çº½äº¤æ‰€äº¤æ˜“æ—¥å†
nyse = mcal.get_calendar('NYSE')
trading_days = nyse.valid_days(start_date='2020-01-01', end_date='2025-12-31')
```

æˆ–ä½¿ç”¨ yfinance è‡ªåŠ¨å¤„ç†:
```python
# yfinanceä¼šè‡ªåŠ¨è·³è¿‡éäº¤æ˜“æ—¥
df = yf.download('^GSPC', start='2020-01-01', end='2025-01-01')
```

---

### æ•°æ®å»¶è¿Ÿå¤„ç†

**yfinance æ•°æ®å»¶è¿Ÿè¯´æ˜**:
- ä¸»è¦S&P 500è‚¡ç¥¨: å®æ—¶æˆ–å»¶è¿Ÿ<5åˆ†é’Ÿ
- å°ç›˜è‚¡/OTCè‚¡ç¥¨: å»¶è¿Ÿ15-20åˆ†é’Ÿ
- æŒ‡æ•°æ•°æ®: é€šå¸¸å®æ—¶

**å»ºè®®**:
- å†å²ç‚¹ä½åˆ†æ: ä½¿ç”¨æ”¶ç›˜æ•°æ®ï¼Œä¸å—å»¶è¿Ÿå½±å“ âœ…
- å®æ—¶ç›‘æ§: æ¥å—15åˆ†é’Ÿå»¶è¿Ÿï¼Œæˆ–ä»˜è´¹ä½¿ç”¨Alpha Vantage

---

## ğŸ“ˆ åŠŸèƒ½æ¸…å•

### Phase 1: åŸºç¡€åŠŸèƒ½ (MVP)

- [ ] ç¾è‚¡æ•°æ®æºæ¨¡å— (`us_stock_source.py`)
  - [ ] yfinance æ•°æ®è·å–
  - [ ] å†å²Kçº¿æ•°æ® (æ—¥çº¿/å‘¨çº¿/æœˆçº¿)
  - [ ] ç¼“å­˜æœºåˆ¶
  - [ ] é”™è¯¯é‡è¯•

- [ ] ç¾è‚¡å¸‚åœºåˆ†æå™¨ (`us_market_analyzer.py`)
  - [ ] å•æŒ‡æ•°å†å²ç‚¹ä½æŸ¥æ‰¾
  - [ ] å¤šæŒ‡æ•°è”åˆåˆ†æ (æ ‡æ™®500 + çº³æ–¯è¾¾å…‹ + é“ç¼æ–¯)
  - [ ] æ¦‚ç‡ç»Ÿè®¡æ¨¡å‹
  - [ ] ä»“ä½ç®¡ç†å»ºè®®

- [ ] è¿è¡Œè„šæœ¬ (`run_us_analysis.py`)
  - [ ] å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ
  - [ ] æ–‡æœ¬æŠ¥å‘Šè¾“å‡º
  - [ ] HTMLæŠ¥å‘Šç”Ÿæˆ

- [ ] æ–‡æ¡£å®Œå–„
  - [ ] ä½¿ç”¨è¯´æ˜ (`US_STOCK_README.md`)
  - [ ] APIå‚è€ƒæ–‡æ¡£

---

### Phase 2: å¢å¼ºåŠŸèƒ½

- [ ] ä¹ç»´åº¦å¸‚åœºåˆ†æ
  - [ ] ä¼°å€¼æŒ‡æ ‡ (PE/PB - éœ€æ‰¾åˆ°ç¾è‚¡ä¼°å€¼æ•°æ®æº)
  - [ ] èµ„é‡‘æµå‘ (ETFèµ„é‡‘æµå…¥æµå‡º)
  - [ ] å¸‚åœºå®½åº¦ (æ¶¨è·Œå®¶æ•°ç»Ÿè®¡)
  - [ ] æŠ€æœ¯æŒ‡æ ‡ (MACD/RSI/å¸ƒæ—å¸¦)
  - [ ] æ³¢åŠ¨ç‡æŒ‡æ ‡ (VIXé›†æˆ)

- [ ] VIXææ…ŒæŒ‡æ•°é›†æˆ
  - [ ] å®æ—¶VIXç›‘æ§
  - [ ] VIXå†å²åˆ†ä½æ•°
  - [ ] VIXä¸æŒ‡æ•°ç›¸å…³æ€§åˆ†æ

- [ ] è¡Œä¸šè½®åŠ¨åˆ†æ
  - [ ] 11å¤§è¡Œä¸šETFç›‘æ§ (XLK/XLF/XLE/XLV/XLIç­‰)
  - [ ] è¡Œä¸šå¼ºå¼±æ’åº
  - [ ] è¡Œä¸šè½®åŠ¨ä¿¡å·

---

### Phase 3: é«˜çº§åŠŸèƒ½

- [ ] å¸‚åœºçŠ¶æ€æ™ºèƒ½è¯Šæ–­
  - [ ] 12ç»´åº¦è¯„åˆ†æ¨¡å‹
  - [ ] ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡å¸‚è‡ªåŠ¨è¯†åˆ«
  - [ ] å…³é”®ä¿¡å·æå–

- [ ] ä¸­ç¾å¸‚åœºè”åŠ¨åˆ†æ
  - [ ] Aè‚¡ä¸ç¾è‚¡ç›¸å…³æ€§
  - [ ] æ¸¯è‚¡ä¸ç¾è‚¡ç›¸å…³æ€§
  - [ ] è·¨å¸‚åœºä¿¡å·ä¼ å¯¼

- [ ] ç¾è”å‚¨æ”¿ç­–ç›‘æ§
  - [ ] åˆ©ç‡æ•°æ®é›†æˆ
  - [ ] è®®æ¯ä¼šè®®æ—¥å†
  - [ ] æ”¿ç­–é¢„æœŸåˆ†æ

---

## ğŸ”„ ä¸ç°æœ‰ç³»ç»Ÿçš„å·®å¼‚

### 1. æ•°æ®æºå·®å¼‚

| ç»´åº¦ | Aè‚¡ | æ¸¯è‚¡ | ç¾è‚¡ |
|------|-----|------|------|
| æ•°æ®æº | akshare | akshare | yfinance |
| äº¤æ˜“æ—¶é—´ | 9:30-15:00 (UTC+8) | 9:30-16:00 (UTC+8) | 21:30-04:00 (UTC+8) |
| äº¤æ˜“æ—¥å† | ä¸­å›½èŠ‚å‡æ—¥ | é¦™æ¸¯èŠ‚å‡æ—¥ | ç¾å›½èŠ‚å‡æ—¥ |
| æ•°æ®å»¶è¿Ÿ | å®æ—¶ | å®æ—¶ | 15-20åˆ†é’Ÿ |
| ä¼°å€¼æ•°æ® | âœ… akshareæ”¯æŒ | âš ï¸ æœ‰é™ | âš ï¸ éœ€é¢å¤–æº |

### 2. æŒ‡æ ‡å·®å¼‚

| æŒ‡æ ‡ç±»å‹ | Aè‚¡ | ç¾è‚¡ | å¤‡æ³¨ |
|----------|-----|------|------|
| æ¶¨è·Œåœ | âœ… æœ‰ | âŒ æ—  | ç¾è‚¡æ— æ¶¨è·Œåœé™åˆ¶ |
| èèµ„èåˆ¸ | âœ… æœ‰ | âœ… æœ‰ | æ•°æ®æºä¸åŒ |
| åŒ—å‘/å—å‘èµ„é‡‘ | âœ… æœ‰ | âŒ æ—  | ç¾è‚¡æ— ç±»ä¼¼æ¦‚å¿µ |
| VIXææ…ŒæŒ‡æ•° | âŒ æ—  | âœ… æœ‰ | ç¾è‚¡ç‰¹æœ‰ |
| PE/PBä¼°å€¼ | âœ… æ˜“è·å– | âš ï¸ éœ€é¢å¤–å¤„ç† | éœ€æ‰¾ä¸“ä¸šæ•°æ®æº |

### 3. åˆ†æé€»è¾‘å¤ç”¨åº¦

| æ¨¡å— | å¤ç”¨åº¦ | éœ€è°ƒæ•´å†…å®¹ |
|------|--------|-----------|
| å†å²ç‚¹ä½å¯¹æ¯” | â­â­â­â­â­ | ä»…éœ€ä¿®æ”¹æ•°æ®æºæ¥å£ |
| æŠ€æœ¯æŒ‡æ ‡è®¡ç®— | â­â­â­â­â­ | å®Œå…¨å¤ç”¨ |
| å¸‚åœºçŠ¶æ€è¯Šæ–­ | â­â­â­â­ | å»é™¤æ¶¨è·Œåœç›¸å…³æŒ‡æ ‡ |
| èµ„é‡‘æµå‘åˆ†æ | â­â­â­ | éœ€é‡æ–°è®¾è®¡ (æ— åŒ—å‘èµ„é‡‘) |
| ä¼°å€¼åˆ†æ | â­â­ | éœ€æ‰¾åˆ°ç¾è‚¡ä¼°å€¼æ•°æ®æº |

---

## â“ éœ€è¦ç¡®è®¤çš„é—®é¢˜

åœ¨å¼€å§‹å®ç°ä¹‹å‰ï¼Œéœ€è¦æ‚¨ç¡®è®¤ä»¥ä¸‹éœ€æ±‚:

### 1. æŒ‡æ•°èŒƒå›´

**é—®é¢˜**: ä½ å¸Œæœ›åˆ†æå“ªäº›ç¾è‚¡æŒ‡æ•°?

**é€‰é¡¹**:
- [ ] **æ ‡æ™®500** (`^GSPC`) - ç¾è‚¡å¤§ç›˜æ ¸å¿ƒæŒ‡æ ‡
- [ ] **çº³æ–¯è¾¾å…‹ç»¼åˆ** (`^IXIC`) - ç§‘æŠ€è‚¡ä¸ºä¸»
- [ ] **é“ç¼æ–¯å·¥ä¸š** (`^DJI`) - ä¼ ç»Ÿè“ç­¹è‚¡
- [ ] **çº³æ–¯è¾¾å…‹100** (`^NDX`) - ç§‘æŠ€å·¨å¤´
- [ ] **ç½—ç´ 2000** (`^RUT`) - å°ç›˜è‚¡
- [ ] **VIXææ…ŒæŒ‡æ•°** (`^VIX`) - å¸‚åœºæƒ…ç»ª
- [ ] å…¶ä»–: _______________

**å»ºè®®**: è‡³å°‘é€‰æ‹©æ ‡æ™®500ã€çº³æ–¯è¾¾å…‹ã€é“ç¼æ–¯è¿™ä¸‰å¤§æ ¸å¿ƒæŒ‡æ•°

---

### 2. æ•°æ®ç±»å‹

**é—®é¢˜**: éœ€è¦å®æ—¶æ•°æ®è¿˜æ˜¯å†å²æ•°æ®å°±å¤Ÿäº†?

**é€‰é¡¹**:
- [ ] **ä»…å†å²æ•°æ®** (æ—¥çº¿æ”¶ç›˜ä»·ï¼Œç”¨äºç‚¹ä½å¯¹æ¯”åˆ†æ)
  - ä¼˜ç‚¹: yfinanceå…è´¹ï¼Œæ— é™åˆ¶
  - ç¼ºç‚¹: æ— æ³•åšæ—¥å†…ç›‘æ§

- [ ] **å‡†å®æ—¶æ•°æ®** (15åˆ†é’Ÿå»¶è¿Ÿ)
  - ä¼˜ç‚¹: ä¾ç„¶ä½¿ç”¨yfinanceï¼Œå…è´¹
  - ç¼ºç‚¹: æœ‰15åˆ†é’Ÿå»¶è¿Ÿ

- [ ] **å®æ—¶æ•°æ®** (éœ€è¦API Key)
  - ä¼˜ç‚¹: æ•°æ®å®æ—¶ï¼Œé€‚åˆç›˜ä¸­ç›‘æ§
  - ç¼ºç‚¹: éœ€æ³¨å†ŒAlpha Vantage API Keyï¼Œæ¯å¤©é™500æ¬¡

**å»ºè®®**: å†å²ç‚¹ä½åˆ†æåªéœ€è¦å†å²æ”¶ç›˜æ•°æ®ï¼Œæ— éœ€å®æ—¶ âœ…

---

### 3. åˆ†æèŒƒå›´

**é—®é¢˜**: æ˜¯å¦éœ€è¦ä¸ªè‚¡åˆ†æï¼Œè¿˜æ˜¯åªåˆ†ææŒ‡æ•°?

**é€‰é¡¹**:
- [ ] **ä»…æŒ‡æ•°åˆ†æ** (æ ‡æ™®500ã€çº³æ–¯è¾¾å…‹ç­‰æŒ‡æ•°)
  - ä¼˜ç‚¹: å®ç°ç®€å•ï¼Œæ•°æ®è·å–å¿«
  - é€‚ç”¨: å®è§‚å¸‚åœºæ‹©æ—¶

- [ ] **æŒ‡æ•° + ETF** (SPY/QQQ/DIAç­‰ä¸»æµETF)
  - ä¼˜ç‚¹: æˆäº¤é‡å¤§ï¼Œæ•°æ®å¯é 
  - é€‚ç”¨: ETFæŠ•èµ„å†³ç­–

- [ ] **æŒ‡æ•° + ETF + ä¸ªè‚¡** (AAPL/MSFT/TSLAç­‰)
  - ä¼˜ç‚¹: åŠŸèƒ½å®Œæ•´ï¼Œè¦†ç›–å…¨é¢
  - ç¼ºç‚¹: å®ç°å·¥ä½œé‡å¤§ï¼Œä¸ªè‚¡æ•°æ®å¤„ç†å¤æ‚

**å»ºè®®**: å…ˆå®ç°æŒ‡æ•°åˆ†æï¼Œåç»­æ‰©å±•åˆ°ETF âœ…

---

### 4. åŠŸèƒ½å¤ç”¨

**é—®é¢˜**: å¸Œæœ›å¤ç”¨ç°æœ‰çš„å“ªäº›åŠŸèƒ½?

**é€‰é¡¹**:
- [ ] **Phase 1**: å†å²ç‚¹ä½å¯¹æ¯” (åŸºç¡€æ¦‚ç‡ç»Ÿè®¡)
- [ ] **Phase 2**: ä¹ç»´åº¦å¸‚åœºåˆ†æ
- [ ] **Phase 3**: å¸‚åœºçŠ¶æ€æ™ºèƒ½è¯Šæ–­ (ç‰›ç†Šè¯†åˆ«)
- [ ] **å‡çº¿åç¦»åº¦ç›‘æ§** (ç±»ä¼¼Aè‚¡ç›‘æ§ç³»ç»Ÿ)
- [ ] **é‚®ä»¶é€šçŸ¥** (ç¾è‚¡è§¦å‘é¢„è­¦æ—¶å‘é‚®ä»¶)

**å»ºè®®**: å…ˆå®ç°Phase 1åŸºç¡€åŠŸèƒ½ï¼ŒéªŒè¯æ•°æ®æºå¯ç”¨æ€§ âœ…

---

### 5. ä¼°å€¼æ•°æ®æº

**é—®é¢˜**: ç¾è‚¡ä¼°å€¼æ•°æ® (PE/PB) å¦‚ä½•è·å–?

**é€‰é¡¹**:
- [ ] **æš‚ä¸å®ç°ä¼°å€¼åˆ†æ** (å…ˆè·³è¿‡ï¼Œä¸“æ³¨ä»·æ ¼åˆ†æ)
- [ ] **ä½¿ç”¨Alpha Vantage** (æœ‰PE/PBæ•°æ®ï¼Œéœ€API Key)
- [ ] **ä½¿ç”¨Financial Modeling Prep** (FMPï¼Œå…è´¹ä½†æœ‰é™é¢)
- [ ] **çˆ¬å–å…¬å¼€ç½‘ç«™** (Yahoo Financeã€MarketWatchç­‰)

**å»ºè®®**: ç¬¬ä¸€ç‰ˆæš‚ä¸å®ç°ä¼°å€¼åˆ†æï¼Œä¸“æ³¨ä»·æ ¼å’ŒæŠ€æœ¯é¢ âœ…

---

### 6. è¿è¡Œæ–¹å¼

**é—®é¢˜**: å¦‚ä½•è¿è¡Œç¾è‚¡åˆ†æ?

**é€‰é¡¹**:
- [ ] **ç‹¬ç«‹è„šæœ¬** (ç±»ä¼¼ `run_hk_analysis.py`)
  ```bash
  python scripts/us_stock_analysis/run_us_analysis.py
  ```

- [ ] **é›†æˆåˆ°ä¸»ç¨‹åº** (åœ¨ `main.py` æ·»åŠ èœå•é€‰é¡¹)
  ```
  1. Aè‚¡å¸‚åœºåˆ†æ
  2. æ¸¯è‚¡å¸‚åœºåˆ†æ
  3. ç¾è‚¡å¸‚åœºåˆ†æ  â† æ–°å¢
  4. å†å²ç‚¹ä½å¯¹æ¯”
  5. å‡çº¿åç¦»åº¦ç›‘æ§
  ```

- [ ] **ä¸¤è€…éƒ½è¦** (æ—¢æœ‰ç‹¬ç«‹è„šæœ¬ï¼Œä¹Ÿé›†æˆåˆ°ä¸»ç¨‹åº)

**å»ºè®®**: ä¸¤è€…éƒ½è¦ï¼Œä¿æŒä¸æ¸¯è‚¡åˆ†æä¸€è‡´ âœ…

---

## ğŸš€ å®æ–½è®¡åˆ’

### Sprint 1: æ•°æ®æºéªŒè¯ (1-2å¤©)

**ç›®æ ‡**: éªŒè¯yfinanceå¯ç”¨æ€§ï¼Œç¡®ä¿æ•°æ®è´¨é‡

- [ ] å®‰è£…yfinance: `pip install yfinance`
- [ ] ç¼–å†™æµ‹è¯•è„šæœ¬ï¼Œè·å–æ ‡æ™®500ã€çº³æ–¯è¾¾å…‹å†å²æ•°æ®
- [ ] æµ‹è¯•æ•°æ®å®Œæ•´æ€§ (æ˜¯å¦æœ‰ç¼ºå¤±ã€å¼‚å¸¸)
- [ ] å¯¹æ¯”Yahoo Financeå®˜ç½‘æ•°æ®ï¼ŒéªŒè¯å‡†ç¡®æ€§

**éªŒæ”¶æ ‡å‡†**: æˆåŠŸè·å–è¿‘5å¹´å†å²æ—¥çº¿æ•°æ®ï¼Œæ•°æ®å‡†ç¡®æ— è¯¯

---

### Sprint 2: æ•°æ®æºæ¨¡å— (2-3å¤©)

**ç›®æ ‡**: å®Œæˆ `us_stock_source.py` å¼€å‘

- [ ] å‚è€ƒ `hkstock_source.py` æ¶æ„
- [ ] å®ç° `USStockDataSource` ç±»
  - [ ] `get_us_index_daily()` - è·å–æŒ‡æ•°å†å²æ•°æ®
  - [ ] `get_us_stock_hist()` - è·å–ä¸ªè‚¡/ETFå†å²æ•°æ®
  - [ ] `get_market_summary()` - è·å–å¸‚åœºæ¦‚å†µ
  - [ ] `calculate_technical_indicators()` - è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
- [ ] æ·»åŠ ç¼“å­˜æœºåˆ¶ (5åˆ†é’Ÿç¼“å­˜)
- [ ] æ·»åŠ é”™è¯¯é‡è¯•æœºåˆ¶ (3æ¬¡é‡è¯• + æŒ‡æ•°é€€é¿)
- [ ] å•å…ƒæµ‹è¯•

**éªŒæ”¶æ ‡å‡†**: é€šè¿‡æ‰€æœ‰å•å…ƒæµ‹è¯•ï¼Œæ•°æ®è·å–æˆåŠŸç‡>95%

---

### Sprint 3: ç¾è‚¡åˆ†æå™¨ (3-4å¤©)

**ç›®æ ‡**: å®Œæˆ `us_market_analyzer.py` å¼€å‘

- [ ] å¤ç”¨ `historical_position_analyzer.py` é€»è¾‘
- [ ] é€‚é…ç¾è‚¡æŒ‡æ•°ä»£ç 
- [ ] å®ç° `USMarketAnalyzer` ç±»
  - [ ] `analyze_current_position()` - å½“å‰ç‚¹ä½åˆ†æ
  - [ ] `find_similar_positions()` - å†å²ç›¸ä¼¼ç‚¹ä½æŸ¥æ‰¾
  - [ ] `calculate_probability()` - æ¶¨è·Œæ¦‚ç‡è®¡ç®—
  - [ ] `generate_position_advice()` - ä»“ä½å»ºè®®
- [ ] VIXé›†æˆ (å¯é€‰)
- [ ] é›†æˆæµ‹è¯•

**éªŒæ”¶æ ‡å‡†**: æˆåŠŸè¾“å‡ºæ ‡æ™®500å†å²ç‚¹ä½åˆ†ææŠ¥å‘Š

---

### Sprint 4: è¿è¡Œè„šæœ¬ä¸æŠ¥å‘Š (2å¤©)

**ç›®æ ‡**: å®Œæˆç”¨æˆ·äº¤äº’è„šæœ¬å’ŒæŠ¥å‘Šç”Ÿæˆ

- [ ] ç¼–å†™ `run_us_analysis.py` è„šæœ¬
  - [ ] å‘½ä»¤è¡Œå‚æ•°è§£æ (`--index`, `--detail`, `--output`)
  - [ ] äº¤äº’å¼æŒ‡æ•°é€‰æ‹©
  - [ ] è¿›åº¦æ¡æ˜¾ç¤º
- [ ] æ–‡æœ¬æŠ¥å‘Šç”Ÿæˆ
- [ ] HTMLæŠ¥å‘Šç”Ÿæˆ (å¤ç”¨ `chart_generator.py`)
- [ ] é›†æˆåˆ° `main.py` ä¸»èœå•

**éªŒæ”¶æ ‡å‡†**: è¿è¡Œè„šæœ¬æˆåŠŸè¾“å‡ºå®Œæ•´æŠ¥å‘Š

---

### Sprint 5: æ–‡æ¡£ä¸æµ‹è¯• (1å¤©)

**ç›®æ ‡**: å®Œå–„æ–‡æ¡£ï¼Œç¡®ä¿å¯ç”¨æ€§

- [ ] ç¼–å†™ `US_STOCK_README.md` ä½¿ç”¨æ–‡æ¡£
- [ ] æ›´æ–°é¡¹ç›®æ ¹ç›®å½• `README.md`
- [ ] æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•

**éªŒæ”¶æ ‡å‡†**: æŒ‰ç…§æ–‡æ¡£è¯´æ˜ï¼Œæ–°ç”¨æˆ·å¯ä»¥ç‹¬ç«‹è¿è¡Œç¾è‚¡åˆ†æ

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

- [yfinance GitHub](https://github.com/ranaroussi/yfinance)
- [yfinance API Reference](https://ranaroussi.github.io/yfinance/reference/index.html)
- [Alpha Vantage Documentation](https://www.alphavantage.co/documentation/)
- [Polygon.io Documentation](https://polygon.io/docs/stocks)

### ä»£ç å‚è€ƒ

- æ¸¯è‚¡æ•°æ®æº: `/data_sources/hkstock_source.py`
- æ¸¯è‚¡åˆ†æå™¨: `/position_analysis/hk_market_analyzer.py`
- å†å²ç‚¹ä½åˆ†æ: `/position_analysis/historical_position_analyzer.py`
- å¸‚åœºçŠ¶æ€è¯Šæ–­: `/position_analysis/market_state_detector.py`

### æŠ€æœ¯æ–‡ç« 

- [Yahoo Finance API Guide](https://algotrading101.com/learn/yahoo-finance-api-guide/)
- [Best Financial APIs 2025](https://medium.com/coinmonks/the-7-best-financial-apis-for-investors-and-developers-in-2025-adbc22024f68)
- [yfinance vs pandas-datareader](https://medium.com/@trading.dude/beyond-yfinance-comparing-the-best-financial-data-apis-for-traders-and-developers-06a3b8bc07e2)

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

### MVP (æœ€å°å¯è¡Œäº§å“)

- [x] æˆåŠŸè·å–æ ‡æ™®500ã€çº³æ–¯è¾¾å…‹ã€é“ç¼æ–¯å†å²æ•°æ®
- [ ] å†å²ç‚¹ä½å¯¹æ¯”åˆ†æåŠŸèƒ½æ­£å¸¸
- [ ] è¾“å‡ºæ–‡æœ¬æŠ¥å‘Šå’ŒHTMLæŠ¥å‘Š
- [ ] å‘½ä»¤è¡Œè„šæœ¬å¯ç”¨
- [ ] æ–‡æ¡£å®Œæ•´

### æ‰©å±•ç›®æ ‡

- [ ] ä¹ç»´åº¦å¸‚åœºåˆ†æ
- [ ] VIXææ…ŒæŒ‡æ•°é›†æˆ
- [ ] å¸‚åœºçŠ¶æ€æ™ºèƒ½è¯Šæ–­
- [ ] ä¸­ç¾å¸‚åœºè”åŠ¨åˆ†æ
- [ ] é‚®ä»¶é¢„è­¦é€šçŸ¥

---

## âš ï¸ é£é™©ä¸æŒ‘æˆ˜

### æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|----------|
| yfinance APIå˜æ›´ | é«˜ | å¢åŠ Alpha Vantageå¤‡ç”¨æº |
| æ•°æ®è´¨é‡é—®é¢˜ | ä¸­ | æ•°æ®éªŒè¯æœºåˆ¶ï¼Œå¼‚å¸¸å€¼è¿‡æ»¤ |
| æ—¶åŒºè½¬æ¢é”™è¯¯ | ä¸­ | å•å…ƒæµ‹è¯•è¦†ç›–æ—¶åŒºåœºæ™¯ |
| ç¾è‚¡èŠ‚å‡æ—¥å¤„ç† | ä½ | yfinanceè‡ªåŠ¨å¤„ç† |

### æ•°æ®æºé£é™©

| é£é™© | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|----------|
| yfinanceè¢«Yahooå°ç¦ | ä½ | å‡†å¤‡Alpha Vantage API Key |
| å…è´¹æ•°æ®æºé™åˆ¶å¢åŠ  | ä¸­ | å¤šæ•°æ®æºæ¶æ„ï¼Œè‡ªåŠ¨åˆ‡æ¢ |
| å†å²æ•°æ®ä¸å®Œæ•´ | ä½ | æ•°æ®éªŒè¯ï¼Œæç¤ºç”¨æˆ· |

---

## ğŸ“ å¾…åŠäº‹é¡¹

åœ¨è·å¾—æ‚¨çš„ç¡®è®¤åï¼Œæˆ‘å°†æŒ‰ç…§ä»¥ä¸‹é¡ºåºå®æ–½:

1. [ ] **ç­‰å¾…æ‚¨çš„éœ€æ±‚ç¡®è®¤** (å›ç­”ä¸Šè¿°6ä¸ªé—®é¢˜)
2. [ ] å®‰è£…yfinanceå¹¶éªŒè¯æ•°æ®å¯ç”¨æ€§
3. [ ] åˆ›å»º `us_stock_source.py` æ•°æ®æºæ¨¡å—
4. [ ] åˆ›å»º `us_market_analyzer.py` åˆ†æå™¨
5. [ ] åˆ›å»ºè¿è¡Œè„šæœ¬ `run_us_analysis.py`
6. [ ] ç¼–å†™ä½¿ç”¨æ–‡æ¡£ `US_STOCK_README.md`
7. [ ] é›†æˆåˆ°ä¸»ç¨‹åº `main.py`
8. [ ] ç«¯åˆ°ç«¯æµ‹è¯•

---

## ğŸ¤ åä½œæ–¹å¼

### æ‚¨éœ€è¦æä¾›

- âœ… éœ€æ±‚ç¡®è®¤ (å›ç­”ä¸Šè¿°6ä¸ªé—®é¢˜)
- âœ… æµ‹è¯•åé¦ˆ (è¿è¡Œè„šæœ¬åçš„é—®é¢˜åé¦ˆ)
- âœ… åŠŸèƒ½ä¼˜å…ˆçº§ (å“ªäº›åŠŸèƒ½æœ€é‡è¦)

### æˆ‘å°†æä¾›

- âœ… å®Œæ•´ä»£ç å®ç°
- âœ… è¯¦ç»†æ–‡æ¡£è¯´æ˜
- âœ… å•å…ƒæµ‹è¯•ç”¨ä¾‹
- âœ… ä½¿ç”¨ç¤ºä¾‹

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·éšæ—¶æ²Ÿé€šï¼

---

**Created by Claude Code ğŸ¤–**

*Let data drive investment decisions!* ğŸ“ˆ
