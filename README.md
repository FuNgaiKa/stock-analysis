# è‚¡ç¥¨å¸‚åœºç»¼åˆåˆ†æžç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„è‚¡ç¥¨å¸‚åœºåˆ†æžå·¥å…·é›†ï¼Œé›†æˆå¤šæ•°æ®æºæž¶æž„ï¼Œæä¾›Aè‚¡/æ¸¯è‚¡å¸‚åœºåˆ†æžã€åŽ†å²ç‚¹ä½å¯¹æ¯”ã€ä¼°å€¼åˆ†æžã€å‡çº¿åç¦»åº¦ç›‘æŽ§ç­‰å¤šç»´åº¦é‡åŒ–åˆ†æžåŠŸèƒ½ã€‚

## ðŸŽ¯ é¡¹ç›®ç‰¹è‰²

### ðŸ¥‡ å¤šæ•°æ®æºæ™ºèƒ½æž¶æž„
- **efinance (ä¸œæ–¹è´¢å¯Œ)**ï¼ˆæŽ¨èï¼‰- å…è´¹å®žæ—¶ï¼Œå“åº”é€Ÿåº¦å¿«
- **baostock (è¯åˆ¸å®)**ï¼ˆæŽ¨èï¼‰- å…è´¹å¼€æºï¼ŒåŽ†å²æ•°æ®å®Œæ•´
- **è…¾è®¯è´¢ç»**ï¼ˆå¤‡ç”¨ï¼‰- 0.2ç§’å¿«é€ŸæŒ‡æ•°æ•°æ®
- **akshare** - å…è´¹ç¨³å®šï¼Œå®Œæ•´å¸‚åœºæ•°æ®
- **Ashare**ï¼ˆå¤‡ç”¨ï¼‰- è½»é‡çº§ä»·æ ¼æ•°æ®
- **æ–°æµªè´¢ç»** - ä¼ ç»Ÿç¨³å®šæŽ¥å£
- **yfinance** - å›½é™…å¸‚åœºæ”¯æŒ
- **è‡ªåŠ¨æ•…éšœåˆ‡æ¢** - ç¡®ä¿æ•°æ®èŽ·å–æˆåŠŸçŽ‡

### ðŸ“Š æ ¸å¿ƒåŠŸèƒ½

#### ðŸ”¥ Aè‚¡å¸‚åœºç«çƒ­ç¨‹åº¦åˆ†æž
- âœ… **å¸‚åœºç«çƒ­ç¨‹åº¦é‡åŒ–åˆ†æž** - ç»¼åˆå¤šç»´æŒ‡æ ‡
- âœ… **æ™ºèƒ½ä»“ä½å»ºè®®** - åŸºäºŽé£Žé™©è¯„ä¼°
- âœ… **å®žæ—¶æ¶¨è·Œåœç›‘æŽ§** - æ¶¨åœ/è·Œåœå®žæ—¶ç»Ÿè®¡
- âœ… **5434åªè‚¡ç¥¨** å…¨å¸‚åœºè¦†ç›–
- âœ… **ç½‘ç»œé‡è¯•æœºåˆ¶** - 3æ¬¡é‡è¯• + æŒ‡æ•°é€€é¿
- âœ… **æ™ºèƒ½ç¼“å­˜** - 5åˆ†é’Ÿç¼“å­˜æå‡æ€§èƒ½

#### ðŸ“ˆ åŽ†å²ç‚¹ä½å¯¹æ¯”åˆ†æžç³»ç»Ÿ
- âœ… **æ™ºèƒ½å¸‚åœºçŠ¶æ€è¯Šæ–­** (Phase 3.1) - 12ç»´åº¦è‡ªåŠ¨è¯†åˆ«ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡å¸‚
- âœ… **ä¹ç»´åº¦æŒ‡æ ‡ä½“ç³»** (Phase 2) - ä¼°å€¼/èµ„é‡‘/æƒ…ç»ª/å®½åº¦/æŠ€æœ¯/æ³¢åŠ¨çŽ‡å…¨é¢åˆ†æž
- âœ… **åŽ†å²ç›¸ä¼¼ç‚¹ä½æŸ¥æ‰¾** - åŸºäºŽä»·æ ¼ã€æˆäº¤é‡ç­‰å¤šå› å­åŒ¹é…
- âœ… **æ¦‚çŽ‡ç»Ÿè®¡é¢„æµ‹** - 5/10/20/60æ—¥æ¶¨è·Œæ¦‚çŽ‡å’Œå¹³å‡æ”¶ç›ŠçŽ‡
- âœ… **ç½®ä¿¡åº¦è¯„ä¼°** - æ ·æœ¬é‡/ä¸€è‡´æ€§/æ—¶é—´åˆ†æ•£åº¦ç»¼åˆè¯„åˆ†
- âœ… **ä»“ä½ç®¡ç†å»ºè®®** - Kellyå…¬å¼ä¼˜åŒ–çš„é‡åŒ–ä»“ä½ç­–ç•¥
- âœ… **æ”¯æŒå¤šæ ‡çš„** - æŒ‡æ•°/ETF/ä¸ªè‚¡å…¨æ”¯æŒ

#### ðŸŒ æ¸¯è‚¡å¸‚åœºåˆ†æž
- âœ… **æ¸¯è‚¡æŒ‡æ•°åˆ†æž** - æ’ç”ŸæŒ‡æ•°/æ’ç”Ÿç§‘æŠ€/æ’ç”Ÿå›½ä¼
- âœ… **æŠ€æœ¯æŒ‡æ ‡åˆ†æž** - KDJ/DMI/MACD/RSI/å¸ƒæž—å¸¦/ATR/å‡çº¿ç­‰
- âœ… **å—å‘èµ„é‡‘ç›‘æŽ§** - æ²ªæ¸¯é€š/æ·±æ¸¯é€šèµ„é‡‘æµå‘
- âœ… **AHè‚¡æº¢ä»·åˆ†æž** - 180+AHè‚¡æº¢ä»·çŽ‡ç›‘æŽ§
- âœ… **å¸‚åœºå¹¿åº¦åˆ†æž** - æ¶¨è·Œå®¶æ•°ç»Ÿè®¡å’ŒçŠ¶æ€åˆ¤æ–­
- âœ… **ç»¼åˆè¯„åˆ†ç³»ç»Ÿ** - å¤šç»´åº¦è¯„åˆ†å’ŒæŠ•èµ„å»ºè®®

#### ðŸ’° ä¼°å€¼åˆ†æžç³»ç»Ÿ
- âœ… **ä¼°å€¼æŒ‡æ ‡è®¡ç®—** - PE/PBåŽ†å²åˆ†ä½æ•°
- âœ… **åŽ†å²ä¼°å€¼å¯¹æ¯”** - å½“å‰ä¼°å€¼åœ¨åŽ†å²ä¸­çš„ä½ç½®
- âœ… **ä¼°å€¼åŒ¹é…åˆ†æž** - åŸºäºŽä¼°å€¼æ°´å¹³çš„åŽ†å²ç‚¹ä½æŸ¥æ‰¾
- âœ… **å¤šç»´åº¦ä¼°å€¼** - æ”¯æŒä¸»è¦æŒ‡æ•°çš„ä¼°å€¼åˆ†æž

#### âš ï¸ å‡çº¿åç¦»åº¦ç›‘æŽ§ç³»ç»Ÿ
- âœ… **11ä¸ªæŒ‡æ•°ç›‘æŽ§** - 9ä¸ªAè‚¡æŒ‡æ•° + 2ä¸ªæ¸¯è‚¡æŒ‡æ•°
- âœ… **ä¸‰çº§é¢„è­¦æœºåˆ¶** - 20%/30%/40%åç¦»é˜ˆå€¼
- âœ… **åŽ†å²å›žæµ‹åˆ†æž** - åç¦»åŽ5/10/20/60æ—¥æ”¶ç›ŠçŽ‡ç»Ÿè®¡
- âœ… **é‚®ä»¶è‡ªåŠ¨é€šçŸ¥** - HTMLæ ¼å¼å½©è‰²é¢„è­¦é‚®ä»¶
- âœ… **å¤±è´¥è‡ªåŠ¨é‡è¯•** - æœ€å¤š3æ¬¡é‡è¯•ç¡®ä¿æ•°æ®èŽ·å–
- âœ… **å®šæ—¶ä»»åŠ¡æ”¯æŒ** - æœ¬åœ°cronæˆ–äº‘ç«¯GitHub Actions
- âœ… **GitHub Actionsé›†æˆ** - æ— éœ€æœåŠ¡å™¨çš„è‡ªåŠ¨åŒ–ç›‘æŽ§

## ðŸ“ˆ é¡¹ç›®ç»“æž„

```
stock-analysis/
â”œâ”€â”€ stock/                                  # Aè‚¡å¸‚åœºç«çƒ­ç¨‹åº¦åˆ†æž
â”‚   â”œâ”€â”€ stock.py                           # ðŸŽ¯ ä¸»åˆ†æžå™¨
â”‚   â”œâ”€â”€ enhanced_data_sources.py           # å¤šæ•°æ®æºç®¡ç†å™¨
â”‚   â”œâ”€â”€ akshare_optimized.py               # akshareä¼˜åŒ–æ•°æ®æº
â”‚   â”œâ”€â”€ tencent_source.py                  # è…¾è®¯è´¢ç»æ•°æ®æº
â”‚   â””â”€â”€ ...                                # å…¶ä»–æ•°æ®æº
â”‚
â”œâ”€â”€ position_analysis/                      # åŽ†å²ç‚¹ä½å¯¹æ¯”åˆ†æžç³»ç»Ÿ
â”‚   â”œâ”€â”€ historical_position_analyzer.py    # æ ¸å¿ƒåˆ†æžå™¨
â”‚   â”œâ”€â”€ market_state_detector.py           # å¸‚åœºçŠ¶æ€æ£€æµ‹å™¨ (Phase 3.1)
â”‚   â”œâ”€â”€ enhanced_data_provider.py          # ä¹ç»´åº¦æ•°æ®æä¾›å™¨ (Phase 2)
â”‚   â”œâ”€â”€ valuation_analyzer.py              # ä¼°å€¼åˆ†æžå™¨
â”‚   â”œâ”€â”€ hk_market_analyzer.py              # æ¸¯è‚¡å¸‚åœºåˆ†æžå™¨
â”‚   â”œâ”€â”€ ma_deviation_monitor.py            # å‡çº¿åç¦»åº¦ç›‘æŽ§å™¨
â”‚   â”œâ”€â”€ email_notifier.py                  # é‚®ä»¶é€šçŸ¥æ¨¡å—
â”‚   â”œâ”€â”€ report_generator.py                # æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ chart_generator.py                 # å›¾è¡¨ç”Ÿæˆå™¨
â”‚   â””â”€â”€ README.md                          # è¯¦ç»†æ–‡æ¡£
â”‚
â”œâ”€â”€ data_sources/                           # æ•°æ®æºæ¨¡å—
â”‚   â””â”€â”€ hkstock_source.py                  # æ¸¯è‚¡æ•°æ®æº
â”‚
â”œâ”€â”€ scripts/                                # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ position_analysis/
â”‚   â”‚   â””â”€â”€ run_ma_deviation_monitor.py    # å‡çº¿åç¦»åº¦ç›‘æŽ§è„šæœ¬
â”‚   â””â”€â”€ hk_stock_analysis/
â”‚       â””â”€â”€ run_hk_analysis.py             # æ¸¯è‚¡åˆ†æžè„šæœ¬
â”‚
â”œâ”€â”€ .github/workflows/                      # GitHub Actions é…ç½®
â”‚   â””â”€â”€ ma_deviation_monitor.yml           # è‡ªåŠ¨ç›‘æŽ§å·¥ä½œæµ
â”‚
â”œâ”€â”€ docs/                                   # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ å‡çº¿åç¦»åº¦ç›‘æŽ§ç³»ç»Ÿ.md               # ç›‘æŽ§ç³»ç»Ÿè¯´æ˜Ž
â”‚   â”œâ”€â”€ GitHub_Actionsé…ç½®æŒ‡å—.md          # Actions é…ç½®æŒ‡å—
â”‚   â”œâ”€â”€ å®šæ—¶ä»»åŠ¡é…ç½®æŒ‡å—.md                # æœ¬åœ°å®šæ—¶ä»»åŠ¡é…ç½®
â”‚   â”œâ”€â”€ HK_STOCK_README.md                 # æ¸¯è‚¡æ¨¡å—æ–‡æ¡£
â”‚   â”œâ”€â”€ VALUATION_ANALYSIS_GUIDE.md        # ä¼°å€¼åˆ†æžæŒ‡å—
â”‚   â””â”€â”€ ...                                # å…¶ä»–è®¾è®¡æ–‡æ¡£
â”‚
â”œâ”€â”€ run_position_analysis.py               # Phase 1: åŸºç¡€åŽ†å²ç‚¹ä½åˆ†æž
â”œâ”€â”€ run_enhanced_analysis.py               # Phase 1.5: å¢žå¼ºå› å­åˆ†æž
â”œâ”€â”€ run_phase2_analysis.py                 # Phase 2: ä¹ç»´åº¦åˆ†æž
â”œâ”€â”€ run_phase3_state_detection.py          # Phase 3.1: å¸‚åœºçŠ¶æ€è¯Šæ–­
â”‚
â”œâ”€â”€ compound_interest/                      # å¤åˆæ”¶ç›Šè®¡ç®—
â”œâ”€â”€ requirements.txt                       # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ email_config.yaml.template             # é‚®ä»¶é…ç½®æ¨¡æ¿
â””â”€â”€ README.md                              # é¡¹ç›®æ–‡æ¡£
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. çŽ¯å¢ƒå‡†å¤‡
```bash
# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…TA-Lib (macOS)
brew install ta-lib
```

### 2. ç«‹å³è¿è¡Œ

#### æ–¹å¼1: Aè‚¡å¸‚åœºç«çƒ­ç¨‹åº¦åˆ†æž
```bash
# å¿«é€Ÿåˆ†æžï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ•°æ®æºï¼‰
python quick_start.py

# äº¤äº’å¼é€‰æ‹©æ•°æ®æº
python quick_start.py --interactive

# å‘½ä»¤è¡Œæ¨¡å¼
python stock/stock.py --interactive
```

#### æ–¹å¼2: åŽ†å²ç‚¹ä½å¯¹æ¯”åˆ†æž
```bash
# Phase 3.1: å¸‚åœºçŠ¶æ€æ™ºèƒ½è¯Šæ–­ï¼ˆæœ€æ–°æŽ¨èâ­ï¼‰
python run_phase3_state_detection.py
python run_phase3_state_detection.py --index sh000001  # æŒ‡å®šæŒ‡æ•°
python run_phase3_state_detection.py --detail          # è¯¦ç»†12ç»´åº¦åˆ†æž

# Phase 2: ä¹ç»´åº¦å¸‚åœºåˆ†æž
python run_phase2_analysis.py
python run_phase2_analysis.py --index sz399006

# Phase 1.5: å¢žå¼ºå› å­åˆ†æžï¼ˆæ”¯æŒETF/ä¸ªè‚¡ï¼‰
python run_enhanced_analysis.py --code 512690   # é…’ETF
python run_enhanced_analysis.py --code 002050   # ä¸‰èŠ±æ™ºæŽ§
python run_enhanced_analysis.py --list          # æŸ¥çœ‹æ”¯æŒçš„æ ‡çš„

# Phase 1: åŸºç¡€åŽ†å²ç‚¹ä½åˆ†æž
python run_position_analysis.py
```

#### æ–¹å¼3: æ¸¯è‚¡å¸‚åœºåˆ†æž
```bash
# æ¸¯è‚¡ç»¼åˆåˆ†æž
python scripts/hk_stock_analysis/run_hk_analysis.py

# æˆ–é€šè¿‡ä¸»ç¨‹åºé€‰æ‹©
python main.py  # é€‰æ‹© "2. æ¸¯è‚¡å¸‚åœºåˆ†æž"
```

#### æ–¹å¼4: å‡çº¿åç¦»åº¦ç›‘æŽ§
```bash
# æŽ§åˆ¶å°è¾“å‡ºç›‘æŽ§ç»“æžœ
python scripts/position_analysis/run_ma_deviation_monitor.py

# å‘é€é‚®ä»¶é€šçŸ¥ï¼ˆéœ€å…ˆé…ç½® email_config.yamlï¼‰
python scripts/position_analysis/run_ma_deviation_monitor.py --email

# é™é»˜æ¨¡å¼ï¼ˆä»…å‘é‚®ä»¶ï¼Œä¸è¾“å‡ºåˆ°æŽ§åˆ¶å°ï¼‰
python scripts/position_analysis/run_ma_deviation_monitor.py --email --quiet

# è‡ªå®šä¹‰é‡è¯•æ¬¡æ•°
python scripts/position_analysis/run_ma_deviation_monitor.py --email --retry 5
```

#### æ–¹å¼5: å®Œæ•´ä¸»ç¨‹åº
```bash
# è¿è¡Œä¸»ç¨‹åºï¼ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½èœå•ï¼‰
python main.py
```

### 3. è¿è¡Œç»“æžœç¤ºä¾‹
```
============================================================
Aè‚¡å¸‚åœºç«çƒ­ç¨‹åº¦åˆ†æžæŠ¥å‘Š
åˆ†æžæ—¶é—´: 2025-09-29 00:55:48
============================================================
ç»¼åˆç«çƒ­ç¨‹åº¦è¯„åˆ†: 0.185
é£Žé™©ç­‰çº§: æžä½Žé£Žé™©
ä»“ä½å»ºè®®: å¯è€ƒè™‘æ»¡ä»“æ“ä½œï¼Œä½†éœ€å…³æ³¨åŸºæœ¬é¢

æŒ‡æ ‡è¯¦æƒ…:
- æˆäº¤é‡æ¯”çŽ‡: 1.00
- ä»·æ ¼åŠ¨é‡: 0.0000
- å¸‚åœºå¹¿åº¦: 0.0000
- æ³¢åŠ¨çŽ‡: 0.0200
- æƒ…ç»ªæŒ‡æ ‡: 0.0000

å¸‚åœºæ¦‚å†µ:
- ä¸Šè¯æŒ‡æ•°æ¶¨è·Œå¹…: -0.65%
- æ¶¨åœè‚¡ç¥¨æ•°: 47
- è·Œåœè‚¡ç¥¨æ•°: 33
============================================================
```

## ðŸ› ï¸ æ ¸å¿ƒæŠ€æœ¯

### æ•°æ®æºæ€§èƒ½å¯¹æ¯”
| æ•°æ®æº | å“åº”æ—¶é—´ | æ•°æ®é‡ | ç¨³å®šæ€§ | è´¹ç”¨ | æŽ¨èåœºæ™¯ |
|--------|----------|--------|--------|------|----------|
| **efinance** | ~1-2s | å®žæ—¶+åŽ†å² | â­â­â­â­ | å…è´¹ | å®žæ—¶è¡Œæƒ…ç›‘æŽ§ |
| **baostock** | ~5-10s | å…¨å¸‚åœº | â­â­â­â­ | å…è´¹ | åŽ†å²æ•°æ®å›žæµ‹ |
| **è…¾è®¯è´¢ç»** | 0.2s | 3å¤§æŒ‡æ•° | â­â­â­â­â­ | å…è´¹ | å¿«é€ŸæŒ‡æ•°æŸ¥è¯¢ |
| **akshare** | ~30-60s | 5000+è‚¡ç¥¨ | â­â­â­â­â­ | å…è´¹ | å…¨å¸‚åœºåˆ†æž |
| **Ashare** | 0.7s | ä»·æ ¼æ•°æ® | â­â­â­â­ | å…è´¹ | è½»é‡çº§åœºæ™¯ |
| **tushare** | éœ€ç§¯åˆ† | ä¸“ä¸šæ•°æ® | â­â­â­â­â­ | ç§¯åˆ†åˆ¶ | ä¸“ä¸šé‡åŒ– |

### é‡åŒ–æŒ‡æ ‡ä½“ç³»
- **æˆäº¤é‡æ¯”çŽ‡** (25%) - å¸‚åœºæ´»è·ƒåº¦
- **ä»·æ ¼åŠ¨é‡** (20%) - æŒ‡æ•°æ¶¨è·Œè¶‹åŠ¿
- **å¸‚åœºå¹¿åº¦** (20%) - ä¸ªè‚¡è¡¨çŽ°åˆ†å¸ƒ
- **æ³¢åŠ¨çŽ‡** (15%) - å¸‚åœºé£Žé™©æ°´å¹³
- **æƒ…ç»ªæŒ‡æ ‡** (20%) - æ¶¨è·Œåœæƒ…ç»ª

## ðŸ“‹ æ•°æ®æºé…ç½®

### å…è´¹æ•°æ®æº (æ— éœ€é…ç½®)
- âœ… **baostock (è¯åˆ¸å®)** - å®Œå…¨å…è´¹ï¼Œæ— éœ€æ³¨å†Œï¼ŒåŽ†å²æ•°æ®å®Œæ•´
- âœ… **efinance (ä¸œæ–¹è´¢å¯Œ)** - å®Œå…¨å…è´¹ï¼Œå®žæ—¶è¡Œæƒ…ï¼Œå“åº”å¿«é€Ÿ
- âœ… **akshare** - å®Œå…¨å…è´¹ï¼Œ5434åªè‚¡ç¥¨æ•°æ®
- âœ… **è…¾è®¯è´¢ç»** - å®žæ—¶æŒ‡æ•°ï¼Œå“åº”æžå¿«
- âœ… **æ–°æµªè´¢ç»** - ä¼ ç»Ÿç¨³å®šæŽ¥å£

### å¯é€‰ä¸“ä¸šæ•°æ®æº
```python
# tushare é…ç½® (å¯é€‰)
import tushare as ts
ts.set_token('your_token_here')  # æ³¨å†ŒèŽ·å–: https://tushare.pro
```

## ðŸ“§ å‡çº¿åç¦»åº¦ç›‘æŽ§é‚®ä»¶é…ç½®

### å¿«é€Ÿé…ç½®

1. **å¤åˆ¶é‚®ç®±é…ç½®æ¨¡æ¿**:
```bash
cp email_config.yaml.template email_config.yaml
```

2. **å¡«å†™é‚®ç®±ä¿¡æ¯**:
```yaml
smtp:
  server: smtp.qq.com      # SMTPæœåŠ¡å™¨
  port: 465                # SMTPç«¯å£

sender:
  email: your_email@qq.com        # å‘ä»¶é‚®ç®±
  password: your_app_password     # é‚®ç®±æŽˆæƒç ï¼ˆä¸æ˜¯ç™»å½•å¯†ç ï¼ï¼‰
  name: è‚¡ç¥¨ç›‘æŽ§ç³»ç»Ÿ

recipients:
  - your_email@qq.com             # æ”¶ä»¶äºº
```

**èŽ·å–é‚®ç®±æŽˆæƒç **:
- **QQé‚®ç®±**: é‚®ç®±è®¾ç½® â†’ è´¦æˆ· â†’ POP3/IMAP/SMTP â†’ ç”ŸæˆæŽˆæƒç 
- **163é‚®ç®±**: é‚®ç®±è®¾ç½® â†’ POP3/SMTP/IMAP â†’ å¼€å¯æœåŠ¡å¹¶èŽ·å–æŽˆæƒç 

3. **æµ‹è¯•é‚®ä»¶å‘é€**:
```bash
python scripts/position_analysis/run_ma_deviation_monitor.py --email
```

### å®šæ—¶ä»»åŠ¡é…ç½®

#### æ–¹æ¡ˆä¸€: GitHub Actionsï¼ˆæŽ¨è - æ— éœ€æœåŠ¡å™¨ï¼‰

è¯¦è§: [docs/GitHub_Actionsé…ç½®æŒ‡å—.md](docs/GitHub_Actionsé…ç½®æŒ‡å—.md)

- âœ… å®Œå…¨å…è´¹ï¼ˆprivateä»“åº“ä¹Ÿæ”¯æŒï¼‰
- âœ… æ¯å‘¨ä¸€åˆ°å‘¨äº” 15:10 è‡ªåŠ¨æ‰§è¡Œ
- âœ… è‡ªåŠ¨å‘é€é‚®ä»¶é€šçŸ¥
- âœ… æ— éœ€æœ¬åœ°ç”µè„‘å¼€æœº

#### æ–¹æ¡ˆäºŒ: æœ¬åœ°å®šæ—¶ä»»åŠ¡ï¼ˆcron/launchdï¼‰

è¯¦è§: [docs/å®šæ—¶ä»»åŠ¡é…ç½®æŒ‡å—.md](docs/å®šæ—¶ä»»åŠ¡é…ç½®æŒ‡å—.md)

**macOS/Linux å¿«é€Ÿé…ç½®**:
```bash
# 1. åˆ›å»ºç›‘æŽ§è„šæœ¬
mkdir -p ~/bin
cat > ~/bin/stock_monitor.sh << 'EOF'
#!/bin/bash
cd /path/to/stock-analysis
python3 scripts/position_analysis/run_ma_deviation_monitor.py --email --quiet
EOF
chmod +x ~/bin/stock_monitor.sh

# 2. é…ç½® cron (æ¯å¤©15:10æ‰§è¡Œ)
crontab -e
# æ·»åŠ : 10 15 * * 1-5 /Users/your_name/bin/stock_monitor.sh
```

## ðŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### äº¤äº’å¼é€‰æ‹©æ•°æ®æº
```bash
# è¿è¡Œæ—¶äº¤äº’å¼é€‰æ‹©æ•°æ®æº
python stock/stock.py --interactive
```

è¿è¡ŒåŽä¼šæ˜¾ç¤ºæ•°æ®æºé€‰æ‹©èœå•ï¼š
```
è¯·é€‰æ‹©æ•°æ®æºï¼š
======================================================================

1. efinance (ä¸œæ–¹è´¢å¯Œ)
   å®žæ—¶æ•°æ®ï¼Œå“åº”å¿«é€Ÿ (~1-2s)
   æŽ¨èåœºæ™¯: å®žæ—¶ç›‘æŽ§

2. baostock (è¯åˆ¸å®)
   åŽ†å²æ•°æ®å®Œæ•´ (~5-10s)
   æŽ¨èåœºæ™¯: åŽ†å²å›žæµ‹

3. akshare
   å…¨å¸‚åœºæ•°æ® (~30-60s)
   æŽ¨èåœºæ™¯: å…¨å¸‚åœºåˆ†æž

4. è…¾è®¯è´¢ç»
   å¿«é€ŸæŒ‡æ•°æŸ¥è¯¢ (~0.2s)
   æŽ¨èåœºæ™¯: å¿«é€ŸæŸ¥çœ‹

5. å¤šæºè‡ªåŠ¨åˆ‡æ¢
   æ™ºèƒ½é€‰æ‹©æœ€ä½³æ•°æ®æº
   æŽ¨èåœºæ™¯: æ—¥å¸¸ä½¿ç”¨
```

### åŸºç¡€åˆ†æž
```python
from stock.stock import AStockHeatAnalyzer

# ä½¿ç”¨é»˜è®¤å¤šæ•°æ®æº
analyzer = AStockHeatAnalyzer()
result = analyzer.analyze_market_heat()

# æŒ‡å®šæ•°æ®æº - efinance (å¿«é€Ÿå®žæ—¶)
analyzer = AStockHeatAnalyzer(data_source='efinance')
result = analyzer.analyze_market_heat()

# æŒ‡å®šæ•°æ®æº - baostock (åŽ†å²å®Œæ•´)
analyzer = AStockHeatAnalyzer(data_source='baostock')
result = analyzer.analyze_market_heat()

print(f"ç«çƒ­ç¨‹åº¦: {result['heat_score']:.3f}")
print(f"é£Žé™©ç­‰çº§: {result['risk_level']}")
```

### åœºæ™¯åŒ–ä½¿ç”¨
```python
from stock.data_source_selector import DataSourceSelector

selector = DataSourceSelector()

# å®žæ—¶ç›‘æŽ§åœºæ™¯
source = selector.get_quick_recommendation('realtime')  # è¿”å›ž 'efinance'
analyzer = AStockHeatAnalyzer(data_source=source)

# åŽ†å²å›žæµ‹åœºæ™¯
source = selector.get_quick_recommendation('backtest')  # è¿”å›ž 'baostock'
analyzer = AStockHeatAnalyzer(data_source=source)

# å…¨å¸‚åœºåˆ†æžåœºæ™¯
source = selector.get_quick_recommendation('analysis')  # è¿”å›ž 'akshare'
analyzer = AStockHeatAnalyzer(data_source=source)
```

### å¤šæ•°æ®æºæµ‹è¯•
```python
from stock.enhanced_data_sources import MultiSourceDataProvider

# æµ‹è¯•æ‰€æœ‰æ•°æ®æº
provider = MultiSourceDataProvider()
data = provider.get_market_data()

# æŸ¥çœ‹æ•°æ®æºä½¿ç”¨æƒ…å†µ
print("æˆåŠŸèŽ·å–æ•°æ®ï¼Œæ¥æºï¼šç¬¬ä¸€ä¼˜å…ˆçº§æ•°æ®æº")
```

### å•ç‹¬æµ‹è¯•æ•°æ®æº
```python
# æµ‹è¯• baostock
from stock.baostock_source import BaostockDataSource
baostock = BaostockDataSource()
data = baostock.get_market_data()

# æµ‹è¯• efinance
from stock.efinance_source import EfinanceDataSource
efinance = EfinanceDataSource()
data = efinance.get_realtime_data()

# æµ‹è¯•è…¾è®¯è´¢ç»
from stock.tencent_source import TencentDataSource
tencent = TencentDataSource()
data = tencent.get_market_summary()
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜æœºåˆ¶
- 5åˆ†é’Ÿæ•°æ®ç¼“å­˜
- å‡å°‘é‡å¤è¯·æ±‚
- æå‡å“åº”é€Ÿåº¦

### ç½‘ç»œä¼˜åŒ–
- 3æ¬¡é‡è¯•æœºåˆ¶
- æŒ‡æ•°é€€é¿å»¶æ—¶
- è¯·æ±‚é—´éš”æŽ§åˆ¶

### å®¹é”™è®¾è®¡
- å¤šæ•°æ®æºå¤‡ä»½
- è‡ªåŠ¨æ•…éšœåˆ‡æ¢
- ä¼˜é›…é™çº§å¤„ç†

## ðŸ”§ æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

**Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ**
```bash
# macOS
brew install ta-lib
pip install TA-Lib

# Ubuntu
sudo apt-get install libta-lib0-dev
pip install TA-Lib
```

**Q: ç½‘ç»œè¿žæŽ¥å¤±è´¥ï¼Ÿ**
- æ£€æŸ¥ç½‘ç»œçŽ¯å¢ƒ
- ä½¿ç”¨æµ‹è¯•æ¨¡å¼ï¼š`python stock/stock.py --test`
- ç¨‹åºä¼šè‡ªåŠ¨åˆ‡æ¢æ•°æ®æº

**Q: æ•°æ®èŽ·å–æ…¢ï¼Ÿ**
- é¦–æ¬¡è¿è¡Œéœ€è¦49ç§’èŽ·å–å®Œæ•´æ•°æ®
- åŽç»­ä½¿ç”¨ç¼“å­˜ï¼Œå“åº”æ›´å¿«
- å¯ä½¿ç”¨è…¾è®¯æ•°æ®æºèŽ·å–æŒ‡æ•°ï¼ˆ0.2ç§’ï¼‰

## ðŸ“Š ç‰ˆæœ¬åŽ†å²

### v3.1 (2025-10-11) - ç›‘æŽ§ä¸Žè‡ªåŠ¨åŒ–
- ðŸ†• **å‡çº¿åç¦»åº¦ç›‘æŽ§ç³»ç»Ÿ** - 11ä¸ªæŒ‡æ•°ä¸‰çº§é¢„è­¦æœºåˆ¶
- ðŸ†• **é‚®ä»¶è‡ªåŠ¨é€šçŸ¥** - HTMLæ ¼å¼å½©è‰²é¢„è­¦é‚®ä»¶
- ðŸ†• **åŽ†å²å›žæµ‹æ•°æ®** - åç¦»åŽ5/10/20/60æ—¥æ”¶ç›ŠçŽ‡ç»Ÿè®¡
- ðŸ†• **GitHub Actionsé›†æˆ** - äº‘ç«¯è‡ªåŠ¨åŒ–ç›‘æŽ§
- ðŸ†• **å®šæ—¶ä»»åŠ¡æ”¯æŒ** - æœ¬åœ°cronå’Œlaunchdé…ç½®
- ðŸ†• **å¤±è´¥è‡ªåŠ¨é‡è¯•** - ç¡®ä¿æ•°æ®èŽ·å–æˆåŠŸçŽ‡

### v3.0 (2025-10-10) - å¸‚åœºçŠ¶æ€æ™ºèƒ½è¯Šæ–­
- ðŸ†• **Phase 3.1å¸‚åœºçŠ¶æ€æ£€æµ‹** - 12ç»´åº¦æ™ºèƒ½è¯†åˆ«ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡å¸‚
- ðŸ†• **æ™ºèƒ½è¯„åˆ†æ¨¡åž‹** - ç»¼åˆ12ä¸ªç»´åº¦åŠ æƒè¯„åˆ†
- ðŸ†• **å…³é”®ä¿¡å·æå–** - è‡ªåŠ¨è¯†åˆ«çœ‹å¤š/çœ‹ç©ºä¿¡å·å’Œé£Žé™©é¢„è­¦
- ðŸ†• **åŠ¨æ€ä»“ä½å»ºè®®** - æ ¹æ®å¸‚åœºçŠ¶æ€è‡ªé€‚åº”è°ƒæ•´
- ðŸ†• **æ–°å¢žæ•°æ®ç»´åº¦** - å‡çº¿ã€èžèµ„èžåˆ¸ã€ä¸»åŠ›èµ„é‡‘ã€é¾™è™Žæ¦œ

### v2.5 (2025-10-09) - ä¹ç»´åº¦æŒ‡æ ‡ä½“ç³»
- ðŸ†• **Phase 2ä¹ç»´åº¦åˆ†æž** - è¾¾åˆ°ä¸“ä¸šæŠ•èµ„è€…æ°´å¹³
- ðŸ†• **ä¼°å€¼æŒ‡æ ‡** - PE/PBåŽ†å²åˆ†ä½æ•°
- ðŸ†• **åŒ—å‘èµ„é‡‘æµå‘** - è¿½è¸ªå¤–èµ„(èªæ˜Žé’±)åŠ¨å‘
- ðŸ†• **å¸‚åœºå®½åº¦æŒ‡æ ‡** - åˆ¤æ–­æ™®æ¶¨/æ™®è·Œ/ç»“æž„æ€§è¡Œæƒ…
- ðŸ†• **æŠ€æœ¯æŒ‡æ ‡** - MACD/RSIè¶‹åŠ¿ç¡®è®¤
- ðŸ†• **æ³¢åŠ¨çŽ‡æŒ‡æ ‡** - é£Žé™©æ°´å¹³é‡åŒ–
- ðŸ†• **ç»¼åˆè¯„åˆ†ç³»ç»Ÿ** - å¤šç»´åº¦åŠ æƒè¯„åˆ†

### v2.0 (2025-10-06) - æ¸¯è‚¡åˆ†æžä¸Žå¢žå¼º
- ðŸ†• **æ¸¯è‚¡å¸‚åœºåˆ†æžæ¨¡å—** - æ’ç”ŸæŒ‡æ•°/æ’ç”Ÿç§‘æŠ€/æ’ç”Ÿå›½ä¼
- ðŸ†• **æŠ€æœ¯æŒ‡æ ‡åˆ†æž** - KDJ/DMI/MACD/RSI/å¸ƒæž—å¸¦/ATR
- ðŸ†• **å—å‘èµ„é‡‘ç›‘æŽ§** - æ²ªæ¸¯é€š/æ·±æ¸¯é€šèµ„é‡‘æµå‘
- ðŸ†• **AHè‚¡æº¢ä»·åˆ†æž** - 180+AHè‚¡æº¢ä»·çŽ‡ç›‘æŽ§
- ðŸ†• **åŽ†å²ç‚¹ä½å¯¹æ¯” Phase 1.5** - æˆäº¤é‡ç»´åº¦ã€ETF/ä¸ªè‚¡æ”¯æŒ
- ðŸ†• **ä¼°å€¼åˆ†æžç³»ç»Ÿ** - PE/PBåŽ†å²ä¼°å€¼å¯¹æ¯”

### v1.5 (2025-10-02) - åŽ†å²ç‚¹ä½å¯¹æ¯”
- ðŸ†• **åŽ†å²ç‚¹ä½å¯¹æ¯”åˆ†æžç³»ç»Ÿ** (Phase 1)
- ðŸ†• **æ¦‚çŽ‡ç»Ÿè®¡æ¨¡åž‹** - 5/10/20/60æ—¥æ¶¨è·Œæ¦‚çŽ‡
- ðŸ†• **ç½®ä¿¡åº¦è¯„ä¼°** - æ ·æœ¬é‡/ä¸€è‡´æ€§/æ—¶é—´åˆ†æ•£åº¦
- ðŸ†• **ä»“ä½ç®¡ç†å»ºè®®** - Kellyå…¬å¼ä¼˜åŒ–
- ðŸ†• **HTMLå¯è§†åŒ–æŠ¥å‘Š** - äº¤äº’å¼å›¾è¡¨

### v1.0 (2025-09-29) - åŸºç¡€ç‰ˆæœ¬
- âœ… **Aè‚¡å¸‚åœºç«çƒ­ç¨‹åº¦åˆ†æž**
- âœ… **å¤šæ•°æ®æºæ™ºèƒ½æž¶æž„** - efinance/baostock/akshareç­‰
- âœ… **ç½‘ç»œé‡è¯•æœºåˆ¶** + **æ™ºèƒ½ç¼“å­˜**
- âœ… æ”¯æŒ **5434åªè‚¡ç¥¨** å…¨å¸‚åœºè¦†ç›–

## ðŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿Žæäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘å»ºè®®
- æ–°å¢žæ•°æ®æºè¯·åœ¨ `enhanced_data_sources.py` ä¸­æ‰©å±•
- ä¼˜åŒ–æ€§èƒ½è¯·å…³æ³¨ç¼“å­˜å’Œç½‘ç»œé‡è¯•æœºåˆ¶
- æ·»åŠ æµ‹è¯•ç”¨ä¾‹ç¡®ä¿ç¨³å®šæ€§

## âš–ï¸ å…è´£å£°æ˜Ž

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æž„æˆæŠ•èµ„å»ºè®®ã€‚æŠ•èµ„æœ‰é£Žé™©ï¼Œå…¥å¸‚éœ€è°¨æ…Žã€‚

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

- **akshare æ–‡æ¡£**: https://akshare.akfamily.xyz/
- **tushare æ–‡æ¡£**: https://tushare.pro/document/2
- **é¡¹ç›®é—®é¢˜**: æ¬¢è¿Žæäº¤ GitHub Issues

## ðŸ“š ç›¸å…³æ–‡æ¡£

### æ ¸å¿ƒåŠŸèƒ½æ–‡æ¡£
- [åŽ†å²ç‚¹ä½å¯¹æ¯”åˆ†æžç³»ç»Ÿ README](position_analysis/README.md) - Phase 1/2/3å®Œæ•´æ–‡æ¡£
- [æ¸¯è‚¡åˆ†æžæ¨¡å—ä½¿ç”¨æŒ‡å—](docs/HK_STOCK_README.md) - æ¸¯è‚¡æ•°æ®æºå’Œåˆ†æžå™¨è¯´æ˜Ž
- [ä¼°å€¼åˆ†æžæŒ‡å—](docs/VALUATION_ANALYSIS_GUIDE.md) - ä¼°å€¼åˆ†æžä½¿ç”¨æ–¹æ³•
- [å‡çº¿åç¦»åº¦ç›‘æŽ§ç³»ç»Ÿ](docs/å‡çº¿åç¦»åº¦ç›‘æŽ§ç³»ç»Ÿ.md) - ç›‘æŽ§ç³»ç»Ÿå®Œæ•´è¯´æ˜Ž

### é…ç½®æŒ‡å—
- [GitHub Actionsé…ç½®æŒ‡å—](docs/GitHub_Actionsé…ç½®æŒ‡å—.md) - äº‘ç«¯è‡ªåŠ¨åŒ–ç›‘æŽ§é…ç½®
- [å®šæ—¶ä»»åŠ¡é…ç½®æŒ‡å—](docs/å®šæ—¶ä»»åŠ¡é…ç½®æŒ‡å—.md) - æœ¬åœ°å®šæ—¶ä»»åŠ¡é…ç½®
- [å¸‚åœºçƒ­åº¦é‡åŒ–æŒ‡æ ‡è®¾è®¡](docs/å¸‚åœºçƒ­åº¦é‡åŒ–æŒ‡æ ‡è®¾è®¡.md) - ç«çƒ­ç¨‹åº¦ç®—æ³•è¯´æ˜Ž

### æŠ€æœ¯æ–‡æ¡£
- [æ¸¯è‚¡å®žçŽ°æ€»ç»“](docs/HK_STOCK_IMPLEMENTATION_SUMMARY.md) - æ¸¯è‚¡æ¨¡å—æŠ€æœ¯å®žçŽ°
- [åŽ†å²ç‚¹ä½å¯¹æ¯”åŠŸèƒ½è®¾è®¡](docs/åŽ†å²ç‚¹ä½å¯¹æ¯”åˆ†æžåŠŸèƒ½è®¾è®¡.md) - è®¾è®¡æ€è·¯å’Œç®—æ³•
- [Phase 2 Summary](position_analysis/PHASE2_SUMMARY.md) - ä¹ç»´åº¦æŒ‡æ ‡ä½“ç³»
- [Phase 3 Design](position_analysis/PHASE3_DESIGN.md) - å¸‚åœºçŠ¶æ€è¯Šæ–­è®¾è®¡

---

**ðŸŽ¯ è®©æ•°æ®é©±åŠ¨æŠ•èµ„å†³ç­–ï¼** ðŸš€