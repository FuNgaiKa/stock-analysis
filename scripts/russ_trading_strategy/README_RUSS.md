# ğŸ“Š Russä¸ªäººäº¤æ˜“ç­–ç•¥ç³»ç»Ÿ

> **ä¸“å±ä¸ªäººæŠ•èµ„ç­–ç•¥ç®¡ç†ç³»ç»Ÿ** - æ•´åˆä»“ä½ç®¡ç†ã€æ”¶ç›Šè¿½è¸ªã€æ½œåœ¨ç©ºé—´è¯„ä¼°å’Œæœˆåº¦è®¡åˆ’ç”Ÿæˆ

---

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸ªäººæŠ•èµ„ç­–ç•¥ç®¡ç†ç³»ç»Ÿ,åŸºäºä½ çš„æŠ•èµ„ç†å¿µè®¾è®¡:

### æ ¸å¿ƒç­–ç•¥åŸåˆ™
- **ä»“ä½ç®¡ç†**: æ»šåŠ¨ä¿æŒ5-9æˆ,ç•™è‡³å°‘1æˆåº”å¯¹é»‘å¤©é¹…
- **æ ‡çš„é€‰æ‹©**: é›†ä¸­æŠ•èµ„3-5åª,å•ä¸€æ ‡çš„â‰¤20%
- **æŠ•èµ„èŠ‚å¥**: é•¿çº¿åº•ä»“ + æ³¢æ®µåŠ å‡ä»“
- **æ”¶ç›Šç›®æ ‡**: å¹´åŒ–15%,ç©¿è¶Šç‰›ç†Š

### æ”¶ç›Šç›®æ ‡

**é•¿æœŸç›®æ ‡**: å¹´åŒ–15%,ç©¿è¶Šç‰›ç†Š

**çŸ­æœŸç›®æ ‡**(åˆ°2026å¹´åº•,æŒ‰ä¼˜å…ˆçº§æ’åº):
1. ğŸ¥‡ èµ„é‡‘è¾¾åˆ°100ä¸‡ (æœ€ä¼˜å…ˆ)
2. ğŸ¥ˆ è·‘èµ¢æ²ªæ·±300 (æ¬¡ä¼˜å…ˆ,ä»2025.1.1èµ·è®¡ç®—)
3. ğŸ¥‰ èµ„é‡‘ç¿»å€/100%æ¶¨å¹… (ç¬¬ä¸‰ä¼˜å…ˆ)

---

## ğŸ“¦ æ¨¡å—åŠŸèƒ½

### 1. æŒä»“å¥åº·åº¦æ£€æŸ¥ (`position_health_checker.py`)
**åŠŸèƒ½**:æ£€æŸ¥æŒä»“æ˜¯å¦ç¬¦åˆç­–ç•¥è§„åˆ™

**æ£€æŸ¥é¡¹**:
- âœ… æ€»ä»“ä½æ˜¯å¦åœ¨5-9æˆåŒºé—´
- âœ… ç°é‡‘é¢„ç•™æ˜¯å¦â‰¥10%
- âœ… å•ä¸€æ ‡çš„æ˜¯å¦â‰¤20%
- âœ… æ ‡çš„æ•°é‡æ˜¯å¦ä¸º3-5åª

**è¾“å‡º**:
- å¥åº·è¯„åˆ†(0-100åˆ†)
- å¥åº·ç­‰çº§(ä¼˜ç§€/è‰¯å¥½/è­¦å‘Š/å±é™©)
- å…·ä½“è­¦å‘Šä¿¡æ¯å’Œä¼˜åŒ–å»ºè®®

---

### 2. æ”¶ç›Šè¿½è¸ªå¯¹æ¯” (`performance_tracker.py`)
**åŠŸèƒ½**:è¿½è¸ªæŠ•èµ„æ”¶ç›Šå¹¶ä¸åŸºå‡†å¯¹æ¯”

**è¿½è¸ªæŒ‡æ ‡**:
- æ€»æ”¶ç›Šç‡å’Œå¹´åŒ–æ”¶ç›Šç‡
- ä¸æ²ªæ·±300å¯¹æ¯”(è¶…é¢æ”¶ç›Š)
- é˜¶æ®µæ€§ç›®æ ‡è¿›åº¦(50ä¸‡â†’60ä¸‡â†’70ä¸‡â†’100ä¸‡)
- ç¿»å€ç›®æ ‡è¿›åº¦(100%æ¶¨å¹…)
- ä¸‰å¤§ç›®æ ‡è¾¾æˆæƒ…å†µ

**è¾“å‡º**:
- æ”¶ç›Šæ¦‚å†µè¡¨
- åŸºå‡†å¯¹æ¯”è¡¨
- é˜¶æ®µç›®æ ‡å®Œæˆåº¦
- ä¼˜åŒ–å»ºè®®

---

### 3. æ½œåœ¨ç©ºé—´è¯„ä¼° (`potential_analyzer.py`)
**åŠŸèƒ½**:åŸºäºå†å²ç‰›å¸‚æ•°æ®è¯„ä¼°ä¸Šæ¶¨æ½œåŠ›

**å†å²æ•°æ®åº“**:
- æ²ªæ·±300: å†å²æ¶¨å¹…1.69-4.82å€
- åˆ›ä¸šæ¿: å†å²æ¶¨å¹…1.97-3.33å€
- ç§‘åˆ›50: å†å²æ¶¨å¹…1.7-2.5å€

**è¯„ä¼°åœºæ™¯**:
- ä¿å®ˆåœºæ™¯:åŸºäºå†å²æœ€ä½æ¶¨å¹…
- å¹³å‡åœºæ™¯:åŸºäºå†å²å¹³å‡æ¶¨å¹…
- ä¹è§‚åœºæ™¯:åŸºäºå†å²æœ€é«˜æ¶¨å¹…

**è¾“å‡º**:
- å„åœºæ™¯ç›®æ ‡ç‚¹ä½å’Œä¸Šæ¶¨ç©ºé—´
- é£é™©æ”¶ç›Šæ¯”è¯„ä¼°
- æŠ•èµ„ä»·å€¼åˆ¤æ–­
- èµ„äº§å¯¹æ¯”æ’å

---

### 4. æœˆåº¦è®¡åˆ’ç”Ÿæˆå™¨ (`monthly_plan_generator.py`)
**åŠŸèƒ½**:ç”Ÿæˆæœˆåº¦æŠ•èµ„è®¡åˆ’

**è¾“å…¥æ•°æ®**:
- å¤§ç›˜æ•°æ®(å¸‚åœºèµ°åŠ¿ã€æŠ€æœ¯é¢ã€èµ„é‡‘é¢)
- åšä¸»è§‚ç‚¹(é›ªçƒã€å…¬ä¼—å·ç­‰)
- æœºæ„æ•°æ®(åˆ¸å•†ç ”æŠ¥ã€åŸºé‡‘æŒä»“)
- å½“å‰æŒä»“æƒ…å†µ

**è¾“å‡ºå†…å®¹**:
- å¸‚åœºè¯„ä¼°å’Œç»¼åˆåˆ¤æ–­
- ä»“ä½è°ƒæ•´ç­–ç•¥
- èµ„äº§é…ç½®å»ºè®®
- å…·ä½“è¡ŒåŠ¨æ¸…å•(æŒ‰ä¼˜å…ˆçº§)
- é£é™©æç¤ºå’ŒæŠ•èµ„æœºä¼š
- æœˆåº¦ç›®æ ‡å’Œå¤ç›˜æ¸…å•

---

### 5. é£é™©ç®¡ç†å™¨ (`risk_manager.py`) **[æ–°å¢]**
**åŠŸèƒ½**:å…¨é¢çš„é£é™©è¯„ä¼°å’Œç›‘æ§

**é£é™©æŒ‡æ ‡**:
- æœ€å¤§å›æ’¤(Maximum Drawdown)
- æ³¢åŠ¨ç‡(Volatility)
- å¤æ™®æ¯”ç‡(Sharpe Ratio)
- Sortinoæ¯”ç‡
- Calmaræ¯”ç‡
- VaR (Value at Risk)
- Betaç³»æ•°
- ä¿¡æ¯æ¯”ç‡(Information Ratio)
- ç›¸å…³æ€§çŸ©é˜µ
- æ­¢æŸæ£€æŸ¥

**è¾“å‡º**:
- å®Œæ•´é£é™©æŠ¥å‘Š
- é£é™©è¯„çº§å’Œè­¦å‘Š
- é£é™©æ§åˆ¶å»ºè®®

---

### 6. åŠ¨æ€ä»“ä½ç®¡ç†å™¨ (`dynamic_position_manager.py`) **[æ–°å¢]**
**åŠŸèƒ½**:æ™ºèƒ½ä»“ä½è°ƒæ•´å»ºè®®

**æ ¸å¿ƒç®—æ³•**:
- Kellyå…¬å¼(æœ€ä¼˜ä»“ä½è®¡ç®—)
- æ³¢åŠ¨ç‡ç›®æ ‡æ³•
- å¸‚åœºç¯å¢ƒè¯†åˆ«(ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡)
- é£é™©å¹³ä»·æ¨¡å‹

**è¾“å‡º**:
- ç»¼åˆä»“ä½å»ºè®®
- å¤šç­–ç•¥å¯¹æ¯”
- åŠ¨æ€è°ƒä»“æ–¹æ¡ˆ

---

### 7. å¢å¼ºç‰ˆå›æµ‹å¼•æ“ (`backtest_engine_enhanced.py`) **[æ–°å¢]**
**åŠŸèƒ½**:å†å²å›æµ‹å’Œå‹åŠ›æµ‹è¯•

**æ ¸å¿ƒåŠŸèƒ½**:
- ç®€å•å›æµ‹
- å‹åŠ›æµ‹è¯•(å¸‚åœºå´©ç›˜ã€ç†Šå¸‚ç­‰åœºæ™¯)
- è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ
- æ•æ„Ÿæ€§åˆ†æ
- å¤šåœºæ™¯å›æµ‹

**è¾“å‡º**:
- å›æµ‹ç»“æœæŠ¥å‘Š
- å‹åŠ›æµ‹è¯•ç»“æœ
- æ¨¡æ‹Ÿç»Ÿè®¡åˆ†æ

---

### 8. æ•°æ®ç®¡ç†å™¨ (`data_manager.py`) **[æ–°å¢]**
**åŠŸèƒ½**:ç»Ÿä¸€æ•°æ®æ¥å£å’Œäº¤æ˜“æ—¥å¿—

**æ ¸å¿ƒåŠŸèƒ½**:
- äº¤æ˜“è®°å½•ç®¡ç†
- æŒä»“å¿«ç…§è·Ÿè¸ª
- æƒç›Šæ›²çº¿è®°å½•
- CSVå¯¼å‡ºåŠŸèƒ½

**è¾“å‡º**:
- æ±‡æ€»æŠ¥å‘Š
- äº¤æ˜“ç»Ÿè®¡
- å†å²æ•°æ®æŸ¥è¯¢

---

### 9. å¯è§†åŒ–æ¨¡å— (`visualizer.py`) **[æ–°å¢]**
**åŠŸèƒ½**:ç”Ÿæˆå„ç±»å›¾è¡¨

**å›¾è¡¨ç±»å‹**:
- æƒç›Šæ›²çº¿å›¾
- å›æ’¤åˆ†æå›¾
- æ”¶ç›Šç‡åˆ†å¸ƒå›¾
- ç›¸å…³æ€§çƒ­åŠ›å›¾
- æœˆåº¦æ”¶ç›Šçƒ­åŠ›å›¾
- ç»¼åˆä»ªè¡¨ç›˜

**è¾“å‡º**:
- é«˜æ¸…PNGå›¾è¡¨
- å¤šç»´åº¦å¯è§†åŒ–åˆ†æ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ç”¨æ³•

```bash
# è¿›å…¥ç›®å½•
cd /Users/russ/PycharmProjects/stock-analysis/scripts/russ_trading_strategy

# æŸ¥çœ‹å¸®åŠ©
python russ_strategy_runner.py --help
```

---

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ç”Ÿæˆå®Œæ•´ç­–ç•¥æŠ¥å‘Š

```bash
python russ_strategy_runner.py \
    --full-report \
    --positions data/positions.json \
    --capital 550000 \
    --hs300 4538 \
    --save reports/russ_strategy_20251020.md
```

**positions.json ç¤ºä¾‹**:
```json
[
    {
        "asset_name": "è¯åˆ¸ETF",
        "asset_key": "CN_SECURITIES",
        "position_ratio": 0.40,
        "current_value": 200000
    },
    {
        "asset_name": "æ’ç”Ÿç§‘æŠ€",
        "asset_key": "HKTECH",
        "position_ratio": 0.30,
        "current_value": 150000
    },
    {
        "asset_name": "ç…¤ç‚­ETF",
        "asset_key": "CN_COAL",
        "position_ratio": 0.15,
        "current_value": 75000
    },
    {
        "asset_name": "ç™½é…’ETF",
        "asset_key": "CN_LIQUOR",
        "position_ratio": 0.08,
        "current_value": 40000
    }
]
```

---

### ç¤ºä¾‹2: æŒä»“å¥åº·åº¦æ£€æŸ¥

```bash
python russ_strategy_runner.py \
    --health-check \
    --positions data/positions.json
```

**è¾“å‡ºç¤ºä¾‹**:
```markdown
## ğŸ“Š æŒä»“å¥åº·åº¦æ£€æŸ¥

**æ£€æŸ¥æ—¶é—´**: 2025-10-20 22:50

### ğŸŸ¢ å¥åº·è¯„åˆ†: 85.0åˆ† (è‰¯å¥½)

### æŒä»“æ¦‚å†µ

- **æ€»ä»“ä½**: 93.0%
- **ç°é‡‘é¢„ç•™**: 7.0%
- **æ ‡çš„æ•°é‡**: 4åª

### æ£€æŸ¥ç»“æœ

- ğŸš¨ æ€»ä»“ä½93.0%åé«˜,è¶…è¿‡æœ€é«˜å»ºè®®90%
- âš ï¸ ç°é‡‘é¢„ç•™7.0%ä¸è¶³,ä½äºæœ€ä½è¦æ±‚10%
- âš ï¸ è¯åˆ¸ETFä»“ä½40.0%è¶…è¿‡20%é™åˆ¶
- âœ… æŒä»“æ ‡çš„æ•°é‡4åªåœ¨åˆç†åŒºé—´(3-5åª)

### ğŸ’¡ ä¼˜åŒ–å»ºè®®

- å»ºè®®å‡ä»“è‡³90%ä»¥ä¸‹
- å»ºè®®ä¿ç•™è‡³å°‘10%ç°é‡‘åº”å¯¹é»‘å¤©é¹…äº‹ä»¶
- å»ºè®®å°†å•ä¸€æ ‡çš„ä»“ä½æ§åˆ¶åœ¨20%ä»¥å†…
  - è¯åˆ¸ETF: å»ºè®®å‡ä»“20.0%
```

---

### ç¤ºä¾‹3: æ”¶ç›Šè¿½è¸ªå¯¹æ¯”

```bash
python russ_strategy_runner.py \
    --performance \
    --capital 550000 \
    --hs300 4538
```

**è¾“å‡ºç¤ºä¾‹**:
```markdown
## ğŸ“ˆ æ”¶ç›Šè¿½è¸ªå¯¹æ¯”

**è¿½è¸ªæ—¥æœŸ**: 2025-10-20
**åŸºå‡†æ—¥æœŸ**: 2025-01-01 (å·²è¿è¡Œ293å¤©/0.8å¹´)

### æ”¶ç›Šæ¦‚å†µ

- **åˆå§‹èµ„é‡‘**: Â¥500,000
- **å½“å‰èµ„é‡‘**: Â¥550,000
- **æ€»æ”¶ç›Šç‡**: 10.00%
- **å¹´åŒ–æ”¶ç›Šç‡**: 12.82%
- **ç›®æ ‡å¹´åŒ–**: 15%

### ğŸ“Š åŸºå‡†å¯¹æ¯”(æ²ªæ·±300)

| æŒ‡æ ‡ | æˆ‘çš„æ”¶ç›Š | æ²ªæ·±300 | è¶…é¢æ”¶ç›Š |
|------|---------|---------|---------|
| æ€»æ”¶ç›Šç‡ | 10.00% | 44.32% | -34.32% |

âš ï¸ **è½åæ²ªæ·±300çº¦34.32%**

### ğŸ¯ ä¸‰å¤§ç›®æ ‡è¾¾æˆæƒ…å†µ

#### âœ… ç›®æ ‡1: èµ„é‡‘è¾¾åˆ°100ä¸‡
- å½“å‰è¿›åº¦: 55.0%
- è¿˜éœ€: Â¥450,000 (45.0ä¸‡)

#### âŒ ç›®æ ‡2: è·‘èµ¢æ²ªæ·±300
- è½åå¹…åº¦: -34.32%

#### ğŸ”„ ç›®æ ‡3: èµ„é‡‘ç¿»å€(100%æ¶¨å¹…)
- å½“å‰è¿›åº¦: 55.0%
- ç¿»å€ç›®æ ‡: Â¥1,000,000
- è¿˜éœ€: Â¥450,000 (45.0ä¸‡)
```

---

### ç¤ºä¾‹4: æ½œåœ¨ç©ºé—´è¯„ä¼°

```bash
python russ_strategy_runner.py \
    --potential \
    --assets CYBZ,HS300,KECHUANG50 \
    --prices '{"CYBZ": 2993, "HS300": 4538, "KECHUANG50": 1368}'
```

**è¾“å‡ºç¤ºä¾‹**:
```markdown
## ğŸš€ æ½œåœ¨ç©ºé—´å¯¹æ¯”è¯„ä¼°

**åˆ†ææ—¥æœŸ**: 2025-10-20
**åœºæ™¯**: average (å¹³å‡åœºæ™¯)

### ğŸ“Š ä¸Šæ¶¨ç©ºé—´æ’å

| æ’å | æŒ‡æ•° | å½“å‰ç‚¹ä½ | ç›®æ ‡ç‚¹ä½ | ä¸Šæ¶¨ç©ºé—´ |
|------|------|---------|---------|---------|
| ğŸ¥‡ | åˆ›ä¸šæ¿æŒ‡ | 2993 | 7932 | **165.1%** |
| ğŸ¥ˆ | æ²ªæ·±300 | 4538 | 13750 | **203.0%** |
| ğŸ¥‰ | ç§‘åˆ›50 | 1368 | 2326 | **70.0%** |

### ğŸ“ˆ å„æŒ‡æ•°è¯¦ç»†åˆ†æ

#### åˆ›ä¸šæ¿æŒ‡
- **å½“å‰ç‚¹ä½**: 2993
- **ç›¸å¯¹å¹´åˆ**: +45.29%
- **ç›®æ ‡ç‚¹ä½**: 7932
- **ä¸Šæ¶¨ç©ºé—´**: 165.1%
- **å»ºè®®**: âœ… åˆ›ä¸šæ¿å…·å¤‡ç¿»å€æ½œåŠ›,é€‚åˆä½œä¸ºæ ¸å¿ƒé…ç½®

#### æ²ªæ·±300
- **å½“å‰ç‚¹ä½**: 4538
- **ç›¸å¯¹å¹´åˆ**: +44.32%
- **ç›®æ ‡ç‚¹ä½**: 13750
- **ä¸Šæ¶¨ç©ºé—´**: 203.0%
- **å»ºè®®**: ğŸ’¡ æ²ªæ·±300ä½œä¸ºå¤§ç›˜åŸºå‡†,é€‚åˆä½œä¸ºåº•ä»“é…ç½®
```

---

### ç¤ºä¾‹5: ç”Ÿæˆæœˆåº¦è®¡åˆ’

é¦–å…ˆå‡†å¤‡å¸‚åœºæ•°æ®æ–‡ä»¶ `market_data.json`:

```json
{
    "market_sentiment": "bullish",
    "trend": "uptrend",
    "fear_greed_index": 65,
    "indices": {
        "HS300": {
            "name": "æ²ªæ·±300",
            "current": 4538,
            "change_pct": "+0.53%",
            "judgment": "ä¼ç¨³"
        },
        "CYBZ": {
            "name": "åˆ›ä¸šæ¿æŒ‡",
            "current": 2993,
            "change_pct": "+1.98%",
            "judgment": "åº•éƒ¨åå¼¹,å¯åŠ ä»“"
        },
        "KECHUANG50": {
            "name": "ç§‘åˆ›50",
            "current": 1368,
            "change_pct": "+0.35%",
            "judgment": "éœ‡è¡"
        }
    }
}
```

è¿è¡Œå‘½ä»¤:

```bash
python russ_strategy_runner.py \
    --monthly-plan \
    --month 2025-11 \
    --market-data data/market_data.json \
    --positions data/positions.json \
    --save reports/monthly_plan_2025-11.md
```

**è¾“å‡ºåŒ…å«**:
- ğŸ“Š å¸‚åœºè¯„ä¼°(æƒ…ç»ªã€è¶‹åŠ¿ã€ç»¼åˆåˆ¤æ–­)
- ğŸ¯ ä»“ä½ç­–ç•¥(å½“å‰ä»“ä½ã€ç›®æ ‡åŒºé—´ã€è°ƒæ•´å»ºè®®)
- ğŸ’¼ èµ„äº§é…ç½®å»ºè®®(æ¨èé…ç½®ã€å»ºè®®å‡ä»“)
- âœ… æœ¬æœˆè¡ŒåŠ¨æ¸…å•(æŒ‰ä¼˜å…ˆçº§åˆ†ç±»)
- âš ï¸ é£é™©æç¤º
- ğŸ’¡ æŠ•èµ„æœºä¼š
- ğŸ¯ æœˆåº¦ç›®æ ‡(æ”¶ç›Šç›®æ ‡ã€æ“ä½œç›®æ ‡ã€çºªå¾‹ç›®æ ‡)
- ğŸ“‹ æœˆæœ«å¤ç›˜æ¸…å•

---

## ğŸ› ï¸ é…ç½®è¯´æ˜

ç³»ç»Ÿä½¿ç”¨é»˜è®¤é…ç½®,ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹ä»£ç è‡ªå®šä¹‰:

```python
config = {
    'strategy': {
        'min_position': 0.50,           # æœ€å°ä»“ä½50%
        'max_position': 0.90,           # æœ€å¤§ä»“ä½90%
        'max_single_position': 0.20,    # å•ä¸€æ ‡çš„æœ€å¤§20%
        'black_swan_reserve': 0.10,     # é»‘å¤©é¹…é¢„ç•™10%
        'min_assets': 3,                # æœ€å°‘3åª
        'max_assets': 5,                # æœ€å¤š5åª
        'target_annual_return': 0.15,   # å¹´åŒ–15%
        'risk_preference': 'moderate'   # é£é™©åå¥½
    },
    'targets': {
        'stage_targets': [500000, 600000, 700000, 1000000],  # é˜¶æ®µç›®æ ‡
        'base_date': '2025-01-01',                           # åŸºå‡†æ—¥æœŸ
        'initial_capital': 500000,                           # åˆå§‹èµ„é‡‘
        'target_annual_return': 0.15                         # å¹´åŒ–15%
    },
    'benchmarks': {
        'hs300_base': 3145.0,      # æ²ªæ·±300åŸºå‡†ç‚¹ä½(2025.1.1)
        'cybz_base': 2060.0,       # åˆ›ä¸šæ¿åŸºå‡†ç‚¹ä½
        'kechuang50_base': 955.0   # ç§‘åˆ›50åŸºå‡†ç‚¹ä½
    }
}
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
russ_trading_strategy/
â”œâ”€â”€ README_RUSS.md                       # æœ¬æ–‡æ¡£
â”œâ”€â”€ russ_strategy_runner.py              # ä¸»ç¨‹åºå…¥å£ â­
â”œâ”€â”€ position_health_checker.py           # æŒä»“å¥åº·åº¦æ£€æŸ¥
â”œâ”€â”€ performance_tracker.py               # æ”¶ç›Šè¿½è¸ªå¯¹æ¯” (å¢å¼ºç‰ˆâœ¨)
â”œâ”€â”€ potential_analyzer.py                # æ½œåœ¨ç©ºé—´è¯„ä¼°
â”œâ”€â”€ monthly_plan_generator.py            # æœˆåº¦è®¡åˆ’ç”Ÿæˆå™¨
â”œâ”€â”€ risk_manager.py                      # é£é™©ç®¡ç†å™¨ [æ–°å¢âœ¨]
â”œâ”€â”€ dynamic_position_manager.py          # åŠ¨æ€ä»“ä½ç®¡ç†å™¨ [æ–°å¢âœ¨]
â”œâ”€â”€ backtest_engine_enhanced.py          # å¢å¼ºç‰ˆå›æµ‹å¼•æ“ [æ–°å¢âœ¨]
â”œâ”€â”€ data_manager.py                      # æ•°æ®ç®¡ç†å™¨ [æ–°å¢âœ¨]
â”œâ”€â”€ visualizer.py                        # å¯è§†åŒ–æ¨¡å— [æ–°å¢âœ¨]
â”œâ”€â”€ unified_config.py                    # ç»Ÿä¸€èµ„äº§é…ç½®
â”œâ”€â”€ run_unified_analysis.py              # ç»Ÿä¸€èµ„äº§åˆ†æ(åŸæœ‰)
â””â”€â”€ unified_email_notifier.py            # é‚®ä»¶é€šçŸ¥å™¨(åŸæœ‰)
```

---

## ğŸ¤– è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ âœ¨

### æŠ¥å‘Šç”Ÿæˆç­–ç•¥

ç³»ç»Ÿç°å·²æ”¯æŒ**è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ**,æ¯å¤©/æ¯å‘¨è‡ªåŠ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š:

```
ğŸ“… æ¯æ—¥æŠ¥å‘Š (äº¤æ˜“æ—¥ 17:00-17:30):
â”œâ”€â”€ 1. æŒä»“è°ƒæ•´å»ºè®® (å¢å¼ºç‰ˆ)                    â† è‡ªåŠ¨ç”Ÿæˆ
â”‚   â”œâ”€â”€ æŒä»“å¥åº·åº¦åˆ†æ
â”‚   â”œâ”€â”€ æ”¶ç›Šè¿½è¸ªå¯¹æ¯”
â”‚   â”œâ”€â”€ ğŸ†• æœºæ„çº§é£é™©æŒ‡æ ‡ (å¤æ™®/å›æ’¤/VaR)
â”‚   â”œâ”€â”€ ğŸ†• Kellyå…¬å¼æ™ºèƒ½ä»“ä½å»ºè®®
â”‚   â”œâ”€â”€ å…·ä½“æ“ä½œæ¸…å•
â”‚   â””â”€â”€ é¢„æœŸæ”¶ç›Šæµ‹ç®—
â”‚
â””â”€â”€ 2. ç»Ÿä¸€èµ„äº§åˆ†æ (å¢å¼ºç‰ˆ)                    â† è‡ªåŠ¨ç”Ÿæˆ + é‚®ä»¶
    â”œâ”€â”€ 25ä¸ªèµ„äº§11ç»´åº¦åˆ†æ
    â”œâ”€â”€ ğŸ†• æ¯ä¸ªèµ„äº§çš„é£é™©æŒ‡æ ‡
    â”œâ”€â”€ ğŸ†• Kellyæœ€ä¼˜ä»“ä½å»ºè®®
    â””â”€â”€ ğŸ†• è¯¦ç»†é£é™©é¢„è­¦

ğŸ“… æ¯å‘¨æŠ¥å‘Š (å‘¨æ—¥ 20:00):
â””â”€â”€ å‘¨åº¦æ€»ç»“ä¸å¤ç›˜                              â† å¾…å®ç°
    â”œâ”€â”€ æœ¬å‘¨å¸‚åœºå›é¡¾
    â”œâ”€â”€ æŒä»“å˜åŒ–è¿½è¸ª
    â”œâ”€â”€ æ”¶ç›Šå½’å› åˆ†æ
    â””â”€â”€ ä¸‹å‘¨è®¡åˆ’å»ºè®®
```

### æ¯æ—¥æŒä»“æŠ¥å‘Šç”Ÿæˆå™¨ âœ¨

**æ–°å¢åŠŸèƒ½**: è‡ªåŠ¨ç”Ÿæˆå¢å¼ºç‰ˆæŒä»“è°ƒæ•´å»ºè®®

```bash
# æ–¹å¼1: æ‰‹åŠ¨ç”Ÿæˆä»Šæ—¥æŠ¥å‘Š
python scripts/russ_trading_strategy/daily_position_report_generator.py --auto-update

# æ–¹å¼2: ç”ŸæˆæŒ‡å®šæ—¥æœŸæŠ¥å‘Š
python scripts/russ_trading_strategy/daily_position_report_generator.py \
    --date 2025-10-21 \
    --auto-update

# æ–¹å¼3: æŒ‡å®šæŒä»“æ–‡ä»¶
python scripts/russ_trading_strategy/daily_position_report_generator.py \
    --positions data/positions_20251021.json \
    --auto-update
```

**æŠ¥å‘Šç‰¹è‰²**:
- âœ… è‡ªåŠ¨è·å–æœ€æ–°å¸‚åœºæ•°æ®(akshare)
- âœ… æœºæ„çº§é£é™©æŒ‡æ ‡åˆ†æ
- âœ… Kellyå…¬å¼æ™ºèƒ½ä»“ä½å»ºè®®
- âœ… å…·ä½“å¯æ‰§è¡Œçš„æ“ä½œæ¸…å•
- âœ… é¢„æœŸæ”¶ç›Šå¯¹æ¯”æµ‹ç®—

**è‡ªåŠ¨åŒ–è®¾ç½®** (crontab):
```bash
# æ¯ä¸ªäº¤æ˜“æ—¥17:00è‡ªåŠ¨ç”Ÿæˆ
0 17 * * 1-5 cd /Users/russ/PycharmProjects/stock-analysis && \
    python3 scripts/russ_trading_strategy/daily_position_report_generator.py --auto-update
```

### ç»Ÿä¸€èµ„äº§åˆ†æ(å¢å¼ºç‰ˆ)

**åŸæœ‰åŠŸèƒ½**: åˆ†æ25ä¸ªèµ„äº§çš„11ç»´åº¦æ•°æ®

```bash
# ç”Ÿæˆå¹¶å‘é€é‚®ä»¶
python scripts/russ_trading_strategy/run_unified_analysis.py --email

# ä¿å­˜åˆ°æ–‡ä»¶
python scripts/russ_trading_strategy/run_unified_analysis.py \
    --save reports/daily/$(date +%Y-%m)/unified_analysis_$(date +%Y%m%d).md
```

**è‡ªåŠ¨åŒ–è®¾ç½®** (crontab):
```bash
# æ¯ä¸ªäº¤æ˜“æ—¥17:30å‘é€é‚®ä»¶æŠ¥å‘Š
30 17 * * 1-5 cd /Users/russ/PycharmProjects/stock-analysis && \
    python3 scripts/russ_trading_strategy/run_unified_analysis.py --email
```

### æŠ¥å‘Šè¾“å‡ºè·¯å¾„

```
reports/
â””â”€â”€ daily/
    â””â”€â”€ YYYY-MM/
        â”œâ”€â”€ æŒä»“è°ƒæ•´å»ºè®®_YYYYMMDD_å¢å¼ºç‰ˆ.md     â† æ¯æ—¥è‡ªåŠ¨ç”Ÿæˆ
        â””â”€â”€ unified_analysis_YYYYMMDD.md         â† æ¯æ—¥è‡ªåŠ¨ç”Ÿæˆ + é‚®ä»¶
```

### è¯¦ç»†ä½¿ç”¨æŒ‡å—

æ›´å¤šè‡ªåŠ¨åŒ–è®¾ç½®å’Œä½¿ç”¨æŠ€å·§,è¯·æŸ¥çœ‹:
- ğŸ“– **æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿä½¿ç”¨æŒ‡å—**: `æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿä½¿ç”¨æŒ‡å—.md`
- ğŸ“– **æŠ€æœ¯å®ç°æ–¹æ¡ˆ**: `å¢å¼ºç‰ˆæŠ¥å‘Šç”Ÿæˆæ–¹æ¡ˆ.md`
- ğŸ“– **æ–‡ä»¶å¤¹ç»“æ„è¯´æ˜**: `æ–‡ä»¶å¤¹ç»“æ„è¯´æ˜.md`

---

## ğŸ“ ä½¿ç”¨æµç¨‹å»ºè®®

### æ¯æ—¥æµç¨‹(è‡ªåŠ¨åŒ–)
1. **æ—©ç›˜å‰**: æŸ¥çœ‹æ˜¨æ—¥è‡ªåŠ¨ç”Ÿæˆçš„æŠ¥å‘Š
   - ğŸ“„ `reports/daily/2025-10/æŒä»“è°ƒæ•´å»ºè®®_æ˜¨æ—¥æ—¥æœŸ_å¢å¼ºç‰ˆ.md`
2. **ç›˜ä¸­**: è§‚å¯ŸæŒä»“èµ°åŠ¿,è®°å½•é‡è¦ä¿¡å·
3. **ä¸‹åˆ17:00**: ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆä»Šæ—¥æŠ¥å‘Š
4. **æ™šä¸Š18:00**:
   - æŸ¥çœ‹ä»Šæ—¥æŒä»“å»ºè®®
   - æŸ¥çœ‹æ“ä½œæ¸…å•å¹¶æ‰§è¡Œ
   - æŸ¥çœ‹æ”¶åˆ°çš„é‚®ä»¶(ç»Ÿä¸€èµ„äº§åˆ†æ)

### æ¯æ—¥æµç¨‹(æ‰‹åŠ¨)
1. **æ—©ç›˜å‰**: æŸ¥çœ‹éš”å¤œå¸‚åœºåŠ¨æ€
2. **ç›˜ä¸­**: è§‚å¯ŸæŒä»“èµ°åŠ¿,è®°å½•é‡è¦ä¿¡å·
3. **æ”¶ç›˜å**:
   - è¿è¡Œ `--health-check` æ£€æŸ¥æŒä»“å¥åº·åº¦
   - è¿è¡Œ `--performance` è¿½è¸ªæ”¶ç›Šæƒ…å†µ
   - æ›´æ–°æŒä»“è°ƒæ•´å»ºè®®æ–‡æ¡£

### æ¯å‘¨æµç¨‹
1. **å‘¨æœ«**:
   - è¿è¡Œ `--potential` è¯„ä¼°å„æŒ‡æ•°æ½œåœ¨ç©ºé—´
   - å¤ç›˜æœ¬å‘¨æ“ä½œ,æ£€æŸ¥æ˜¯å¦ç¬¦åˆç­–ç•¥
   - è°ƒæ•´ä¸‹å‘¨æ“ä½œè®¡åˆ’
   - æŸ¥çœ‹å‘¨æŠ¥(å¾…å®ç°)

### æ¯æœˆæµç¨‹
1. **æœˆåˆ**:
   - è¿è¡Œ `--monthly-plan` ç”Ÿæˆæœ¬æœˆè®¡åˆ’
   - åˆ¶å®šæœ¬æœˆä»“ä½è°ƒæ•´å’Œèµ„äº§é…ç½®æ–¹æ¡ˆ
2. **æœˆæœ«**:
   - è¿è¡Œ `--full-report` ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
   - å¤ç›˜æœ¬æœˆæ‰§è¡Œæƒ…å†µ
   - è¯„ä¼°ç›®æ ‡è¾¾æˆåº¦

---

## ğŸ’¡ è¿›é˜¶æŠ€å·§

### 1. æ‰¹é‡ç”ŸæˆæŠ¥å‘Š

åˆ›å»ºshellè„šæœ¬ `generate_reports.sh`:

```bash
#!/bin/bash

DATE=$(date +%Y%m%d)
REPORT_DIR="reports/$DATE"
mkdir -p $REPORT_DIR

# å¥åº·åº¦æ£€æŸ¥
python russ_strategy_runner.py \
    --health-check \
    --positions data/positions.json \
    --save "$REPORT_DIR/health_check.md"

# æ”¶ç›Šè¿½è¸ª
python russ_strategy_runner.py \
    --performance \
    --capital 550000 \
    --hs300 4538 \
    --save "$REPORT_DIR/performance.md"

# å®Œæ•´æŠ¥å‘Š
python russ_strategy_runner.py \
    --full-report \
    --positions data/positions.json \
    --capital 550000 \
    --hs300 4538 \
    --save "$REPORT_DIR/full_report.md"

echo "æŠ¥å‘Šç”Ÿæˆå®Œæˆ: $REPORT_DIR"
```

### 2. ç»“åˆç°æœ‰çš„unified_analysis

```bash
# å…ˆè¿è¡Œèµ„äº§åˆ†æ
python run_unified_analysis.py --assets CYBZ HKTECH CN_COAL CN_LIQUOR

# å†è¿è¡Œç­–ç•¥æŠ¥å‘Š
python russ_strategy_runner.py --full-report --positions data/positions.json
```

### 3. å®šæ—¶ä»»åŠ¡

ä½¿ç”¨crontabè®¾ç½®å®šæ—¶ä»»åŠ¡:

```bash
# æ¯ä¸ªäº¤æ˜“æ—¥æ”¶ç›˜å19:00è¿è¡Œ
0 19 * * 1-5 cd /Users/russ/PycharmProjects/stock-analysis/scripts/russ_trading_strategy && ./generate_reports.sh
```

---

## ğŸ“Š ä¸å…¶ä»–å·¥å…·æ•´åˆ

### ä¸æŒä»“è°ƒæ•´å»ºè®®æ–‡æ¡£æ•´åˆ

åœ¨æ¯æ—¥æŒä»“æ›´æ–°æ–‡æ¡£ä¸­åµŒå…¥ç­–ç•¥æ¨¡å—ç»“æœ:

```markdown
# æŒä»“è°ƒæ•´å»ºè®®_20251020

## ğŸ“Š æŒä»“å¥åº·åº¦æ£€æŸ¥
[åµŒå…¥ health_check è¾“å‡º]

## ğŸ“ˆ æ”¶ç›Šè¿½è¸ªå¯¹æ¯”
[åµŒå…¥ performance è¾“å‡º]

## ğŸš€ æ½œåœ¨ç©ºé—´è¯„ä¼°
[åµŒå…¥ potential è¾“å‡º]

## æ“ä½œå»ºè®®
...
```

### Pythonè„šæœ¬è°ƒç”¨

```python
from russ_trading_strategy.russ_strategy_runner import RussStrategyRunner

# åˆ›å»ºè¿è¡Œå™¨
runner = RussStrategyRunner()

# æŒä»“æ•°æ®
positions = [...]

# è¿è¡Œå¥åº·æ£€æŸ¥
health_report = runner.run_health_check(positions)

# è¿è¡Œæ”¶ç›Šè¿½è¸ª
perf_report = runner.run_performance_tracking(550000, 4538)

# ç»„åˆè¾“å‡º
with open('daily_report.md', 'w') as f:
    f.write(health_report)
    f.write("\n\n")
    f.write(perf_report)
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: æ‰¾ä¸åˆ°æ¨¡å—

**é”™è¯¯**: `ModuleNotFoundError: No module named 'russ_trading_strategy'`

**è§£å†³**:
```bash
cd /Users/russ/PycharmProjects/stock-analysis/scripts
python russ_trading_strategy/russ_strategy_runner.py --help
```

### é—®é¢˜2: JSONæ ¼å¼é”™è¯¯

**é”™è¯¯**: `JSONDecodeError: Expecting value`

**è§£å†³**: æ£€æŸ¥JSONæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®,ä½¿ç”¨åœ¨çº¿å·¥å…·éªŒè¯: https://jsonlint.com/

### é—®é¢˜3: æƒé™ä¸è¶³

**é”™è¯¯**: `PermissionError: [Errno 13] Permission denied`

**è§£å†³**:
```bash
chmod +x russ_strategy_runner.py
chmod +x generate_reports.sh
```

---

## ğŸ“ ç»´æŠ¤è¯´æ˜

### æ›´æ–°åŸºå‡†æ•°æ®

å¦‚æœéœ€è¦æ›´æ–°åŸºå‡†ç‚¹ä½(å¦‚æ–°ä¸€å¹´å¼€å§‹):

```python
# åœ¨ russ_strategy_runner.py çš„ _load_default_config() ä¸­ä¿®æ”¹:
'benchmarks': {
    'hs300_base': 3145.0,      # æ›´æ–°ä¸ºæ–°åŸºå‡†ç‚¹ä½
    'cybz_base': 2060.0,
    'kechuang50_base': 955.0
}

'targets': {
    'base_date': '2025-01-01',  # æ›´æ–°ä¸ºæ–°åŸºå‡†æ—¥æœŸ
    'initial_capital': 500000    # æ›´æ–°ä¸ºæ–°èµ·å§‹èµ„é‡‘
}
```

### æ·»åŠ æ–°çš„å†å²ç‰›å¸‚æ•°æ®

åœ¨ `potential_analyzer.py` çš„ `HISTORICAL_BULL_DATA` ä¸­æ·»åŠ :

```python
'CYBZ': {
    'bull_markets': [
        {'year': '2015', 'low': 1200, 'high': 4000, 'multiple': 3.33},
        {'year': '2021', 'low': 1817, 'high': 3576, 'multiple': 1.97},
        {'year': '2025', 'low': 2060, 'high': ???, 'multiple': ???}  # æ–°å¢
    ]
}
```

---

## ğŸ“ å…è´£å£°æ˜

æœ¬ç³»ç»ŸåŸºäºå†å²æ•°æ®å’ŒæŠ€æœ¯åˆ†æ,ä»…ä¾›ä¸ªäººå‚è€ƒå’Œå­¦ä¹ ä½¿ç”¨,ä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚

**æŠ•èµ„æœ‰é£é™©,å…¥å¸‚éœ€è°¨æ…ã€‚**

æ‰€æœ‰æŠ•èµ„å†³ç­–åº”åŸºäºä¸ªäººç‹¬ç«‹åˆ¤æ–­,æœ¬ç³»ç»Ÿå¼€å‘è€…ä¸å¯¹ä»»ä½•æŠ•èµ„æŸå¤±æ‰¿æ‹…è´£ä»»ã€‚

---

## ğŸ‰ æ€»ç»“

è¿™ä¸ªç³»ç»Ÿæ•´åˆäº†ä½ çš„æŠ•èµ„ç­–ç•¥æ ¸å¿ƒåŸåˆ™,æä¾›äº†:

âœ… **ç³»ç»ŸåŒ–**: å®Œæ•´çš„ç­–ç•¥æ‰§è¡Œå’Œç›‘æ§ä½“ç³»
âœ… **è‡ªåŠ¨åŒ–**: ä¸€é”®ç”Ÿæˆå„ç±»æŠ¥å‘Š
âœ… **æ•°æ®é©±åŠ¨**: åŸºäºå†å²æ•°æ®å’Œå®æ—¶æ•°æ®å†³ç­–
âœ… **çºªå¾‹æ€§**: å¼ºåˆ¶æ‰§è¡Œä»“ä½ç®¡ç†å’Œé£é™©æ§åˆ¶è§„åˆ™

åšæŒä½¿ç”¨è¿™ä¸ªç³»ç»Ÿ,é…åˆæ¯æ—¥/æ¯å‘¨/æ¯æœˆå¤ç›˜,ç›¸ä¿¡èƒ½å¸®åŠ©ä½ å®ç°:
- ğŸ“ˆ **é•¿æœŸç›®æ ‡**: å¹´åŒ–15%
- ğŸ’° **çŸ­æœŸç›®æ ‡**(åˆ°2026å¹´åº•,æŒ‰ä¼˜å…ˆçº§):
  1. 100ä¸‡èµ„é‡‘ (æœ€ä¼˜å…ˆ)
  2. è·‘èµ¢æ²ªæ·±300 (æ¬¡ä¼˜å…ˆ)
  3. èµ„é‡‘ç¿»å€ (ç¬¬ä¸‰ä¼˜å…ˆ)

**è®°ä½**: ç³»ç»Ÿåªæ˜¯å·¥å…·,æœ€é‡è¦çš„æ˜¯æ‰§è¡Œçºªå¾‹! ğŸ’ª

---

**Happy Trading! ğŸ¯**
