# 市场热度量化指标设计方案

## 一、核心指标体系

### 1. 成交量维度
- [ ] **两市总成交额**
  - 获取沪深两市每日总成交额
  - 计算N日移动平均(5日、20日、60日)
  - 计算成交额相对均值的偏离度

- [ ] **量能放大系数**
  - 当日成交额 / N日平均成交额
  - 设定阈值判断放量/缩量状态
  - 连续放量天数统计

- [ ] **换手率**
  - 全市场平均换手率
  - 活跃股票占比(换手率>5%的股票数量/总数)

### 2. 情绪维度
- [ ] **涨跌家数比**
  - 上涨股票数 / 下跌股票数
  - 平盘股票占比
  - 涨幅>3%股票占比、跌幅>3%股票占比

- [ ] **涨跌停统计**
  - 涨停板数量(剔除ST、新股)
  - 跌停板数量
  - 涨停/跌停比值
  - 连板股数量(2连板、3连板及以上)

- [ ] **市场振幅**
  - 单日振幅: (最高-最低)/开盘价
  - N日平均振幅
  - 振幅分布统计

- [ ] **强势股占比**
  - 创N日新高的股票数量/总数
  - 站上多条均线的股票占比

### 3. 资金流向维度
- [ ] **北向资金**
  - 当日净流入/流出额
  - N日累计净流入
  - 净流入额占两市成交额比例

- [ ] **融资融券**
  - 融资余额变化
  - 融资买入额占成交额比例
  - 融券余额变化

- [ ] **大单资金流向**
  - 大单净流入统计
  - 主力资金净流入股票占比

- [ ] **行业资金分布**
  - 资金流入前5行业
  - 行业轮动速度

### 4. 波动率维度
- [ ] **历史波动率**
  - 上证指数/深证成指历史波动率(10日、20日)
  - 波动率分位数(当前波动率在历史中的位置)

- [ ] **极端波动统计**
  - 单日涨跌幅>2%的天数占比(近N日)
  - 跳空缺口频率

- [ ] **VIX类指标**
  - 构建A股恐慌指数
  - 基于期权数据(如有)或波动率计算

## 二、综合热度指数设计

### 市场热度指数 (Market Heat Index, MHI)

#### 计算公式
```
MHI = α*成交量因子 + β*情绪因子 + γ*资金因子 + δ*波动因子
```

#### 因子计算方法
- [ ] **成交量因子** (0-100分)
  - 量能放大系数标准化
  - 换手率标准化
  - 加权平均

- [ ] **情绪因子** (0-100分)
  - 涨跌家数比标准化
  - 涨停数量标准化
  - 强势股占比标准化
  - 加权平均

- [ ] **资金因子** (0-100分)
  - 北向资金流入标准化
  - 融资买入占比标准化
  - 大单净流入标准化
  - 加权平均

- [ ] **波动因子** (0-100分)
  - 历史波动率标准化
  - 振幅标准化
  - 加权平均

#### 权重设定(初始方案)
- [ ] α(成交量) = 0.35
- [ ] β(情绪) = 0.30
- [ ] γ(资金) = 0.25
- [ ] δ(波动) = 0.10

*(后续通过历史数据回测优化权重)*

### 热度等级划分
- [ ] **极冷**: MHI < 20
- [ ] **偏冷**: 20 ≤ MHI < 40
- [ ] **温和**: 40 ≤ MHI < 60
- [ ] **偏热**: 60 ≤ MHI < 80
- [ ] **过热**: MHI ≥ 80

## 三、数据源需求

- [ ] **实时行情数据**
  - 两市成交额
  - 个股涨跌幅、换手率
  - 涨跌停统计

- [ ] **资金流向数据**
  - 北向资金(陆股通)
  - 融资融券数据
  - 大单统计

- [ ] **指数数据**
  - 上证指数、深证成指、创业板指
  - 行业指数

- [ ] **历史数据**
  - 至少3-5年历史数据用于标准化和回测

## 四、实现方案

### 技术架构
- [ ] **数据采集模块**
  - 使用 akshare 获取市场数据
  - 数据清洗和预处理
  - 数据存储(SQLite/CSV)

- [ ] **指标计算模块**
  - 各维度子指标计算
  - 因子标准化(Z-score或百分位)
  - 综合指数计算

- [ ] **回测验证模块**
  - 历史热度指数计算
  - 与市场表现相关性分析
  - 权重参数优化

- [ ] **可视化展示**
  - 热度指数时间序列图
  - 各维度雷达图
  - 历史分位数展示
  - 关键指标看板

### 开发计划
- [ ] **Phase 1: 数据采集**
  - 实现基础数据获取接口
  - 验证数据完整性和准确性

- [ ] **Phase 2: 指标计算**
  - 实现各维度子指标计算
  - 单元测试

- [ ] **Phase 3: 综合指数**
  - 实现MHI计算逻辑
  - 历史数据回测

- [ ] **Phase 4: 优化迭代**
  - 权重参数调优
  - 新增有效指标
  - 性能优化

- [ ] **Phase 5: 可视化**
  - 开发展示界面
  - 报表生成

## 五、应用场景

### 1. 择时参考
- [ ] 极冷区(<20): 市场底部区域,可考虑逐步建仓
- [ ] 偏冷区(20-40): 市场低迷,等待转暖信号
- [ ] 温和区(40-60): 市场正常状态,持仓观望
- [ ] 偏热区(60-80): 市场活跃,注意风险
- [ ] 过热区(>80): 市场过热,考虑减仓

### 2. 仓位管理
- [ ] 根据热度指数动态调整仓位
- [ ] MHI与仓位的映射关系
- [ ] 结合趋势指标综合判断

### 3. 风险预警
- [ ] 极端值预警(过冷/过热)
- [ ] 快速变化预警(热度骤变)
- [ ] 背离预警(指数涨但热度降)

### 4. 市场复盘
- [ ] 每日热度报告
- [ ] 周度/月度热度趋势
- [ ] 历史同期对比

## 六、注意事项

- [ ] **数据质量**: 确保数据来源稳定可靠
- [ ] **实时性**: 明确是盘中实时还是盘后计算
- [ ] **节假日处理**: 停盘日数据处理逻辑
- [ ] **异常值处理**: 极端行情下的指标修正
- [ ] **动态调整**: 市场结构变化时需重新校准
- [ ] **过拟合风险**: 避免过度优化历史数据

## 七、后续扩展

- [ ] **细分市场热度**: 主板/创业板/科创板分别计算
- [ ] **行业热度**: 各行业热度指数
- [ ] **题材热度**: 热门题材活跃度跟踪
- [ ] **机器学习**: 使用ML模型预测热度变化
- [ ] **情绪指标**: 整合社交媒体/新闻情绪数据

---

**创建时间**: 2025-09-30
**状态**: 设计阶段
**负责人**: Russell Fu